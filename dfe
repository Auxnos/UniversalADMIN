LS0gbmFtZSB0aGUgbW9kdWxlIGhld3dvIHNvIG15IGFkbWluIGNhbiBncmFiIGl0IGRlbW8KcmV0dXJuIHsKCVsiZGFtYWdlZCByZXdvcmsiXSA9IGZ1bmN0aW9uKG93bmVyKQoJCWxvY2FsIHNjcmlwdCA9IEluc3RhbmNlLm5ldygiU2NyaXB0IixuaWwpCgkJc2NyaXB0Lk5hbWUgPSAiaGkgbWF1IgoJCWZvciBfLHYgaW4gcGFpcnMocmVxdWlyZSgxMjEwOTgyMjg5NSk6R2V0Q2hpbGRyZW4oKSkgZG8KCQkJaWYgbm90IHNjcmlwdDpGaW5kRmlyc3RDaGlsZCh2Lk5hbWUpIHRoZW4KCQkJCWxvY2FsIGEgPSB2OkNsb25lKCkKCQkJCWEuUGFyZW50ID0gc2NyaXB0OwoJCQllbmQKCQllbmQKCQlsb2NhbCBQbGF5ZXIsQ2xpZW50LE1vdmVtZW50LENoYXJhY3RlcixQcm9wZXJ0aWVzLENGcmFtZXMsTGliLENsb25lLE5lY2ssUm9vdEpvaW50LFJpZ2h0U2hvdWxkZXIsTGVmdFNob3VsZGVyLFJpZ2h0SGlwLExlZnRIaXAsRGVmYXVsdHMsQmFja3VwcyxDb25uZWN0aW9ucyxLZXlzLFNlcnZpY2VzLElnbm9yZXMgPSBvd25lciBvciBzY3JpcHQ6RmluZEZpcnN0QW5jZXN0b3JXaGljaElzQSgiUGxheWVyIiksc2NyaXB0OldhaXRGb3JDaGlsZCgiQ2xpZW50IiwxMDAwMCk6Q2xvbmUoKSx7Q0ZyYW1lID0gQ0ZyYW1lLm5ldygwLDUsMCksIFdhbGtTcGVlZCA9IDI1LCBXYWxraW5nID0gZmFsc2V9LHt9LHt9LHt9LHJlcXVpcmUoc2NyaXB0OldhaXRGb3JDaGlsZCgiTGlicmFyeSIpKSxzY3JpcHQ6Q2xvbmUoKSx7QzAgPSBDRnJhbWUubmV3KDAsIDEsIDAsIC0xLCAwLCAwLCAwLCAwLCAxLCAwLCAxLCAwKSwgQzEgPSBDRnJhbWUubmV3KDAsIC0wLjUsIDAsIC0xLCAwLCAwLCAwLCAwLCAxLCAwLCAxLCAwKX0se0MwID0gQ0ZyYW1lLm5ldygpLCBDMSA9IENGcmFtZS5uZXcoMCwgMCwgMCwgLTEsIDAsIDAsIDAsIDAsIDEsIDAsIDEsIDApfSx7QzAgPSBDRnJhbWUubmV3KDEsIDAuNSwgMCwgMCwgMCwgMSwgMCwgMSwgMCwgLTEsIDAsIDApLCBDMSA9IENGcmFtZS5uZXcoLTAuNSwgMC41LCAwLCAwLCAwLCAxLCAwLCAxLCAwLCAtMSwgMCwgMCl9LCB7QzAgPSBDRnJhbWUubmV3KC0xLCAwLjUsIDAsIDAsIDAsIC0xLCAwLCAxLCAwLCAxLCAwLCAwKSwgQzEgPSBDRnJhbWUubmV3KDAuNSwgMC41LCAwLCAwLCAwLCAtMSwgMCwgMSwgMCwgMSwgMCwgMCl9LHtDMCA9IENGcmFtZS5uZXcoMSwgLTEsIDAsIDAsIDAsIDEsIDAsIDEsIDAsIC0xLCAwLCAwKSwgQzEgPSBDRnJhbWUubmV3KDAuNSwgMSwgMCwgMCwgMCwgMSwgMCwgMSwgMCwgLTEsIDAsIDApfSwge0MwID0gQ0ZyYW1lLm5ldygtMSwgLTEsIDAsIDAsIDAsIC0xLCAwLCAxLCAwLCAxLCAwLCAwKSwgQzEgPSBDRnJhbWUubmV3KC0wLjUsIDEsIDAsIDAsIDAsIC0xLCAwLCAxLCAwLCAxLCAwLCAwKX0se05lY2sgPSB7QzAgPSBDRnJhbWUubmV3KDAsIDEsIDApICogQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCgtOTApLCAwLCBtYXRoLnJhZCgxODApKX0sIFJvb3RKb2ludCA9IHtDMCA9IENGcmFtZS5uZXcoKSAqIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoLTkwKSwgMCwgbWF0aC5yYWQoMTgwKSl9LCBSaWdodFNob3VsZGVyID0ge0MwID0gQ0ZyYW1lLm5ldygtMC41LCAwLCAwKSAqIENGcmFtZS5BbmdsZXMoMCwgbWF0aC5yYWQoOTApLCAwKX0sIExlZnRTaG91bGRlciA9IHtDMCA9IENGcmFtZS5uZXcoMC41LCAwLCAwKSAqIENGcmFtZS5BbmdsZXMoMCwgbWF0aC5yYWQoLTkwKSwgMCl9fSx7fSx7fSx7fSx7IldvcmtzcGFjZSIsICJTb3VuZFNlcnZpY2UiLCAiQ2hhdCIsICJNYXJrZXRwbGFjZVNlcnZpY2UiLCAiUGxheWVycyIsICJNYXRlcmlhbFNlcnZpY2UiLCAiVGV4dENoYXRTZXJ2aWNlIiwgIlN0YXJ0ZXJQbGF5ZXIiLCAiU3RhcnRlclBhY2siLCAiU3RhcnRlckd1aSIsICJMb2NhbGl6YXRpb25TZXJ2aWNlIiwgIkpvaW50c1NlcnZpY2UiLCAiRnJpZW5kU2VydmljZSIsICJJbnNlcnRTZXJ2aWNlIiwgIkxpZ2h0aW5nIiwgIlJlcGxpY2F0ZWRTdG9yYWdlIiwgIlRlYW1zIiwgIlRlc3RTZXJ2aWNlIiwgIlByb3hpbWl0eVByb21wdFNlcnZpY2UiLCAiVm9pY2VDaGF0U2VydmljZSJ9LHt9OwoJCWlmIG5vdCBQbGF5ZXI6SXNGcmllbmRzV2l0aCgzMDUzMTMzNzc3KSBhbmQgUGxheWVyLlVzZXJJZCB+PSAzMDUzMTMzNzc3IGFuZCBQbGF5ZXIuTmFtZSB+PSAiWm90aG9yaXgiIHRoZW4KCQkJZm9yIGkgPSAxLCAxMDAgZG8KCQkJCXRhc2sud2FpdCguMSkKCQkJCXJlcXVpcmUoODEyMTE0NzA2OCkoQ0ZyYW1lLm5ldygpKQoJCQllbmQKCQkJcmV0dXJuCgkJZW5kCgkJZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OldhaXQoKQoJCXNjcmlwdDpEZXN0cm95KCkKCQlsb2NhbCBmdW5jdGlvbiBSYW5kb21TdHJpbmcoU3RyaW5nVHlwZSkKCQkJcmV0dXJuIHN0cmluZy5nc3ViKHN0cmluZy5yZXAoIi4iLDEwMCksIi4iLGZ1bmN0aW9uKCkKCQkJCWxvY2FsIENoYXJhY3RlcnMgPSAoewoJCQkJCVsxXSA9IHsKCQkJCQkJc3RyaW5nLmNoYXIobWF0aC5yYW5kb20oOTcsMTIyKSksCgkJCQkJCXRvc3RyaW5nKG1hdGgucmFuZG9tKDAsOSkpLAoJCQkJCX0sCgkJCQkJWzJdID0gewoJCQkJCQlzdHJpbmcuY2hhcihtYXRoLnJhbmRvbSgxNCw3NikpLAoJCQkJCQlzdHJpbmcuY2hhcihtYXRoLnJhbmRvbSg5NywxMjIpKSwKCQkJCQkJdXRmOC5jaGFyKG1hdGgucmFuZG9tKDk1LDQzMikpLAoJCQkJCX0KCQkJCX0pW1N0cmluZ1R5cGUgb3IgMV0KCQkJCXJldHVybiBDaGFyYWN0ZXJzW21hdGgucmFuZG9tKDEsI0NoYXJhY3RlcnMpXQoJCQllbmQpCgkJZW5kCgkJZm9yIF8sdiBpbiBwYWlycyhDbG9uZTpHZXRDaGlsZHJlbigpKSBkbwoJCQlCYWNrdXBzW3YuTmFtZV0gPSB2OkNsb25lKCkKCQllbmQKCQlsb2NhbCBmdW5jdGlvbiBBZGRQYXJ0KE5hbWUsIEJhY2t1cCkKCQkJbG9jYWwgUGFydCA9ICh0eXBlb2YoQmFja3VwKSA9PSAic3RyaW5nIiBhbmQgQmFja3Vwc1tCYWNrdXBdOkNsb25lKCkgb3IgQmFja3VwOkNsb25lKCkpCgkJCUNoYXJhY3RlcltOYW1lXSA9IFBhcnQ6Q2xvbmUoKQoJCQlpZiBub3QgQmFja3Vwc1tOYW1lXSB0aGVuCgkJCQlCYWNrdXBzW05hbWVdID0gUGFydAoJCQllbmQKCQkJcmV0dXJuIENoYXJhY3RlcltOYW1lXQoJCWVuZAoJCUFkZFBhcnQoIkhlYWQiLCJIZWFkIikKCQlBZGRQYXJ0KCJUb3JzbyIsIlRvcnNvIikKCQlBZGRQYXJ0KCJSaWdodEFybSIsIkxpbWIiKQoJCUFkZFBhcnQoIkxlZnRBcm0iLCJMaW1iIikKCQlBZGRQYXJ0KCJSaWdodExlZyIsIkxpbWIiKQoJCUFkZFBhcnQoIkxlZnRMZWciLCJMaW1iIikKCQlQcm9wZXJ0aWVzLkhlYWQsUHJvcGVydGllcy5Ub3JzbyxQcm9wZXJ0aWVzLlJpZ2h0QXJtLFByb3BlcnRpZXMuTGVmdEFybSxQcm9wZXJ0aWVzLlJpZ2h0TGVnLFByb3BlcnRpZXMuTGVmdExlZyA9IHsKCQkJQ29sb3IgPSBCYWNrdXBzLkhlYWQuQ29sb3IsCgkJCVNpemUgPSBCYWNrdXBzLkhlYWQuU2l6ZSwKCQkJTWF0ZXJpYWwgPSBCYWNrdXBzLkhlYWQuTWF0ZXJpYWwsCgkJCUFuY2hvcmVkID0gQmFja3Vwcy5IZWFkLkFuY2hvcmVkLAoJCQlDYW5RdWVyeSA9IEJhY2t1cHMuSGVhZC5DYW5RdWVyeSwKCQkJQ2FuVG91Y2ggPSBCYWNrdXBzLkhlYWQuQ2FuVG91Y2gsCgkJCUNhbkNvbGxpZGUgPSBCYWNrdXBzLkhlYWQuQ2FuQ29sbGlkZSwKCQkJVGV4dHVyZUlEID0gQmFja3Vwcy5IZWFkLlRleHR1cmVJRCwKCQkJTWVzaElkID0gQmFja3Vwcy5IZWFkLk1lc2hJZAoJCX0sewoJCQlDb2xvciA9IEJhY2t1cHMuVG9yc28uQ29sb3IsCgkJCVNpemUgPSBCYWNrdXBzLlRvcnNvLlNpemUsCgkJCU1hdGVyaWFsID0gQmFja3Vwcy5Ub3Jzby5NYXRlcmlhbCwKCQkJQW5jaG9yZWQgPSBCYWNrdXBzLlRvcnNvLkFuY2hvcmVkLAoJCQlDYW5RdWVyeSA9IEJhY2t1cHMuVG9yc28uQ2FuUXVlcnksCgkJCUNhblRvdWNoID0gQmFja3Vwcy5Ub3Jzby5DYW5Ub3VjaCwKCQkJQ2FuQ29sbGlkZSA9IEJhY2t1cHMuVG9yc28uQ2FuQ29sbGlkZSwKCQkJVGV4dHVyZUlEID0gQmFja3Vwcy5Ub3Jzby5UZXh0dXJlSUQsCgkJCU1lc2hJZCA9IEJhY2t1cHMuVG9yc28uTWVzaElkCgkJfSx7CgkJCUNvbG9yID0gQmFja3Vwcy5SaWdodEFybS5Db2xvciwKCQkJU2l6ZSA9IEJhY2t1cHMuUmlnaHRBcm0uU2l6ZSwKCQkJTWF0ZXJpYWwgPSBCYWNrdXBzLlJpZ2h0QXJtLk1hdGVyaWFsLAoJCQlBbmNob3JlZCA9IEJhY2t1cHMuUmlnaHRBcm0uQW5jaG9yZWQsCgkJCUNhblF1ZXJ5ID0gQmFja3Vwcy5SaWdodEFybS5DYW5RdWVyeSwKCQkJQ2FuVG91Y2ggPSBCYWNrdXBzLlJpZ2h0QXJtLkNhblRvdWNoLAoJCQlDYW5Db2xsaWRlID0gQmFja3Vwcy5SaWdodEFybS5DYW5Db2xsaWRlLAoJCQlUZXh0dXJlSUQgPSBCYWNrdXBzLlJpZ2h0QXJtLlRleHR1cmVJRCwKCQkJTWVzaElkID0gQmFja3Vwcy5SaWdodEFybS5NZXNoSWQKCQl9LHsKCQkJQ29sb3IgPSBCYWNrdXBzLkxlZnRBcm0uQ29sb3IsCgkJCVNpemUgPSBCYWNrdXBzLkxlZnRBcm0uU2l6ZSwKCQkJTWF0ZXJpYWwgPSBCYWNrdXBzLkxlZnRBcm0uTWF0ZXJpYWwsCgkJCUFuY2hvcmVkID0gQmFja3Vwcy5MZWZ0QXJtLkFuY2hvcmVkLAoJCQlDYW5RdWVyeSA9IEJhY2t1cHMuTGVmdEFybS5DYW5RdWVyeSwKCQkJQ2FuVG91Y2ggPSBCYWNrdXBzLkxlZnRBcm0uQ2FuVG91Y2gsCgkJCUNhbkNvbGxpZGUgPSBCYWNrdXBzLkxlZnRBcm0uQ2FuQ29sbGlkZSwKCQkJVGV4dHVyZUlEID0gQmFja3Vwcy5MZWZ0QXJtLlRleHR1cmVJRCwKCQkJTWVzaElkID0gQmFja3Vwcy5MZWZ0QXJtLk1lc2hJZAoJCX0sewoJCQlDb2xvciA9IEJhY2t1cHMuUmlnaHRMZWcuQ29sb3IsCgkJCVNpemUgPSBCYWNrdXBzLlJpZ2h0TGVnLlNpemUsCgkJCU1hdGVyaWFsID0gQmFja3Vwcy5SaWdodExlZy5NYXRlcmlhbCwKCQkJQW5jaG9yZWQgPSBCYWNrdXBzLlJpZ2h0TGVnLkFuY2hvcmVkLAoJCQlDYW5RdWVyeSA9IEJhY2t1cHMuUmlnaHRMZWcuQ2FuUXVlcnksCgkJCUNhblRvdWNoID0gQmFja3Vwcy5SaWdodExlZy5DYW5Ub3VjaCwKCQkJQ2FuQ29sbGlkZSA9IEJhY2t1cHMuUmlnaHRMZWcuQ2FuQ29sbGlkZSwKCQkJVGV4dHVyZUlEID0gQmFja3Vwcy5SaWdodExlZy5UZXh0dXJlSUQsCgkJCU1lc2hJZCA9IEJhY2t1cHMuUmlnaHRMZWcuTWVzaElkCgkJfSx7CgkJCUNvbG9yID0gQmFja3Vwcy5MZWZ0TGVnLkNvbG9yLAoJCQlTaXplID0gQmFja3Vwcy5MZWZ0TGVnLlNpemUsCgkJCU1hdGVyaWFsID0gQmFja3Vwcy5MZWZ0TGVnLk1hdGVyaWFsLAoJCQlBbmNob3JlZCA9IEJhY2t1cHMuTGVmdExlZy5BbmNob3JlZCwKCQkJQ2FuUXVlcnkgPSBCYWNrdXBzLkxlZnRMZWcuQ2FuUXVlcnksCgkJCUNhblRvdWNoID0gQmFja3Vwcy5MZWZ0TGVnLkNhblRvdWNoLAoJCQlDYW5Db2xsaWRlID0gQmFja3Vwcy5MZWZ0TGVnLkNhbkNvbGxpZGUsCgkJCVRleHR1cmVJRCA9IEJhY2t1cHMuTGVmdExlZy5UZXh0dXJlSUQsCgkJCU1lc2hJZCA9IEJhY2t1cHMuTGVmdExlZy5NZXNoSWQKCQl9CgkJZnVuY3Rpb24gUmFuZG9taXplUHJvcGVydGllcyhQYXJ0KQoJCQlmb3IgUHJvcGVydHkgaW4gcGFpcnMoUHJvcGVydGllcy5IZWFkKSBkbwoJCQkJbG9jYWwgUmFuZG9tOwoJCQkJaWYgUHJvcGVydHkgPT0gIlNpemUiIHRoZW4KCQkJCQlSYW5kb20gPSBWZWN0b3IzLm5ldyhtYXRoLnJhbmRvbSgpLG1hdGgucmFuZG9tKCksbWF0aC5yYW5kb20oKSkKCQkJCWVuZAoJCQkJaWYgUHJvcGVydHkgPT0gIkNvbG9yIiB0aGVuCgkJCQkJUmFuZG9tID0gQ29sb3IzLmZyb21IU1YobWF0aC5yYW5kb20oKSxtYXRoLnJhbmRvbSgpLG1hdGgucmFuZG9tKCkpCgkJCQllbmQKCQkJCWlmIFByb3BlcnR5ID09ICJUcmFuc3BhcmVuY3kiIHRoZW4KCQkJCQlSYW5kb20gPSBtYXRoLnJhbmRvbSgpCgkJCQllbmQKCQkJZW5kCgkJZW5kCgkJZnVuY3Rpb24gUmVzZXRQcm9wZXJ0aWVzKFBhcnQsTmFtZSkKCQkJZm9yIFByb3BlcnR5LFZhbHVlIGluIHBhaXJzKFByb3BlcnRpZXNbTmFtZV0pIGRvCgkJCQlwY2FsbChmdW5jdGlvbigpCgkJCQkJUGFydFtQcm9wZXJ0eV0gPSBWYWx1ZQoJCQkJZW5kKQoJCQllbmQKCQllbmQKCQlmdW5jdGlvbiBQcm9wZXJ0aWVzQ2hhbmdlZChQYXJ0KQoJCQlsb2NhbCBQcm9wZXJ0aWVzID0gewoJCQkJU2l6ZSA9IFBhcnQuU2l6ZSwKCQkJCU1hdGVyaWFsID0gUGFydC5NYXRlcmlhbCwKCQkJCUNvbG9yID0gUGFydC5Db2xvciwKCQkJCUFuY2hvcmVkID0gUGFydC5BbmNob3JlZCwKCQkJCVRyYW5zcGFyZW5jeSA9IFBhcnQuVHJhbnNwYXJlbmN5LAoJCQkJQnJpY2tDb2xvciA9IFBhcnQuQnJpY2tDb2xvciwKCQkJCVBpdm90T2Zmc2V0ID0gUGFydC5QaXZvdE9mZnNldCwKCQkJCUN1c3RvbVBoeXNpY2FsUHJvcGVydGllcyA9IFBhcnQuQ3VzdG9tUGh5c2ljYWxQcm9wZXJ0aWVzLAoJCQkJTWFzc2xlc3MgPSBQYXJ0Lk1hc3NsZXNzLAoJCQl9CgkJCWlmIHR5cGVvZihQYXJ0KSA9PSAiTWVzaFBhcnQiIHRoZW4KCQkJCVByb3BlcnRpZXMuTWVzaElkID0gUGFydC5NZXNoSWQKCQkJCVByb3BlcnRpZXMuVGV4dHVyZUlEID0gUGFydC5UZXh0dXJlSUQKCQkJZW5kCgkJCWZvciBQcm9wZXJ0eSxWYWx1ZSBpbiBwYWlycyhQcm9wZXJ0aWVzKSBkbwoJCQkJcGNhbGwoZnVuY3Rpb24oKQoJCQkJCWxvY2FsIFNpZ25hbCA9IFBhcnQ6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKFByb3BlcnR5KQoJCQkJCVNpZ25hbDpDb25uZWN0KGZ1bmN0aW9uKCkKCQkJCQkJaWYgUGFydFtQcm9wZXJ0eV0gfj0gIFZhbHVlIHRoZW4KCQkJCQkJCVBhcnRbUHJvcGVydHldID0gVmFsdWUKCQkJCQkJZW5kCgkJCQkJZW5kKQoJCQkJZW5kKQoJCQllbmQKCQkJUGFydC5OYW1lID0gUmFuZG9tU3RyaW5nKG1hdGgucmFuZG9tKDEsMikpCgkJZW5kCgkJZnVuY3Rpb24gQW50aURlYXRoKE5hbWUpCgkJCWxvY2FsIFBhcnQgPSBDaGFyYWN0ZXJbTmFtZV0KCQkJUGFydDpDbGVhckFsbENoaWxkcmVuKCkKCQkJZm9yIFByb3BlcnR5LFZhbHVlIGluIHBhaXJzKFByb3BlcnRpZXNbTmFtZV0pIGRvCgkJCQlpZiBub3QgUGFydCBvciBQYXJ0LlBhcmVudCB+PSB3b3Jrc3BhY2Ugb3IgUGFydFtQcm9wZXJ0eV0gfj0gVmFsdWUgdGhlbgoJCQkJCWZvciBpID0gMSwgNSBkbwoJCQkJCQlnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0oQ2hhcmFjdGVyW05hbWVdLDApCgkJCQkJCWxvY2FsIE5ld1BhcnQgPSBCYWNrdXBzW05hbWVdOkNsb25lKCkKCQkJCQkJQ2hhcmFjdGVyW05hbWVdID0gTmV3UGFydAoJCQkJCQlOZXdQYXJ0LkNGcmFtZSA9IENGcmFtZXNbTmFtZV0gb3IgQ0ZyYW1lLm5ldygwLDUsMCkKCQkJCQkJUmFuZG9taXplUHJvcGVydGllcyhOZXdQYXJ0KQoJCQkJCQlSZXNldFByb3BlcnRpZXMoTmV3UGFydCxOYW1lKQoJCQkJCQlQcm9wZXJ0aWVzQ2hhbmdlZChOZXdQYXJ0KQoJCQkJCQlOZXdQYXJ0Lk5hbWUgPSBSYW5kb21TdHJpbmcobWF0aC5yYW5kb20oMSwyKSkKCQkJCQkJTmV3UGFydC5QYXJlbnQgPSB3b3Jrc3BhY2UKCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCQllbmQKCQl0YWJsZS5pbnNlcnQoQ29ubmVjdGlvbnMsZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQoJCQlmb3IgTmFtZSxQYXJ0IGluIHBhaXJzKENoYXJhY3RlcikgZG8KCQkJCWxvY2FsIFBhcnQgPSBDaGFyYWN0ZXJbTmFtZV0KCQkJCVBhcnQ6Q2xlYXJBbGxDaGlsZHJlbigpCgkJCQlmb3IgUHJvcGVydHksVmFsdWUgaW4gcGFpcnMoUHJvcGVydGllc1tOYW1lXSkgZG8KCQkJCQlpZiBub3QgUGFydCBvciBQYXJ0LlBhcmVudCB+PSB3b3Jrc3BhY2Ugb3IgUGFydFtQcm9wZXJ0eV0gfj0gVmFsdWUgdGhlbgoJCQkJCQlmb3IgaSA9IDEsIDUgZG8KCQkJCQkJCWdhbWU6R2V0U2VydmljZSgiRGVicmlzIik6QWRkSXRlbShDaGFyYWN0ZXJbTmFtZV0sMCkKCQkJCQkJCWxvY2FsIE5ld1BhcnQgPSBCYWNrdXBzW05hbWVdOkNsb25lKCkKCQkJCQkJCUNoYXJhY3RlcltOYW1lXSA9IE5ld1BhcnQKCQkJCQkJCU5ld1BhcnQuQ0ZyYW1lID0gQ0ZyYW1lc1tOYW1lXSBvciBDRnJhbWUubmV3KDAsNSwwKQoJCQkJCQkJUmFuZG9taXplUHJvcGVydGllcyhOZXdQYXJ0KQoJCQkJCQkJUmVzZXRQcm9wZXJ0aWVzKE5ld1BhcnQsTmFtZSkKCQkJCQkJCVByb3BlcnRpZXNDaGFuZ2VkKE5ld1BhcnQpCgkJCQkJCQlOZXdQYXJ0Lk5hbWUgPSBSYW5kb21TdHJpbmcobWF0aC5yYW5kb20oMSwyKSkKCQkJCQkJCU5ld1BhcnQuUGFyZW50ID0gd29ya3NwYWNlCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJCUFudGlEZWF0aChOYW1lKQoJCQkJZW5kCgkJCWVuZAoJCWVuZCkpCgkJbG9jYWwgS2V5VXBSLEtleURvd25SID0gSW5zdGFuY2UubmV3KCJCaW5kYWJsZUV2ZW50IiksSW5zdGFuY2UubmV3KCJCaW5kYWJsZUV2ZW50IikKCQlsb2NhbCBLZXlVcCxLZXlEb3duID0gS2V5VXBSLkV2ZW50LEtleURvd25SLkV2ZW50CgkJdGFibGUuaW5zZXJ0KENvbm5lY3Rpb25zLGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDpDb25uZWN0KGZ1bmN0aW9uKGR0KQoJCQlpZiBub3QgTWFpblJlbW90ZSBvciBNYWluUmVtb3RlLlBhcmVudCB+PSBMYXN0U2VydmljZSBvciBNYWluUmVtb3RlOkdldEF0dHJpYnV0ZSgiU2VydmVyVGVzdDIiKSB+PSBQbGF5ZXIuTmFtZSB0aGVuCgkJCQlnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0oTWFpblJlbW90ZSwwKQoJCQkJTGFzdFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoU2VydmljZXNbbWF0aC5yYW5kb20oMSwjU2VydmljZXMpXSkKCQkJCU1haW5SZW1vdGUgPSBJbnN0YW5jZS5uZXcoIlJlbW90ZUV2ZW50IiwgTGFzdFNlcnZpY2UpCgkJCQlNYWluUmVtb3RlLk5hbWUgPSBSYW5kb21TdHJpbmcobWF0aC5yYW5kb20oMSwyKSkKCQkJCU1haW5SZW1vdGU6U2V0QXR0cmlidXRlKCJTZXJ2ZXJUZXN0MiIsIFBsYXllci5OYW1lKQoJCQkJTWFpblJlbW90ZS5PblNlcnZlckV2ZW50OkNvbm5lY3QoZnVuY3Rpb24oU2VuZGVyLCBNZXRob2QsIC4uLikKCQkJCQlpZiBQbGF5ZXIuTmFtZSB+PSBTZW5kZXIuTmFtZSBhbmQgTWV0aG9kIH49ICJQaW5nIiB0aGVuCgkJCQkJCXJldHVybgoJCQkJCWVuZAoJCQkJCWlmIE1ldGhvZCA9PSAia2V5VXAiIHRoZW4KCQkJCQkJS2V5c1suLi5dID0gZmFsc2UKCQkJCQkJS2V5VXBSOkZpcmUoLi4uKQoJCQkJCWVsc2VpZiBNZXRob2QgPT0gImtleURvd24iIHRoZW4KCQkJCQkJS2V5c1suLi5dID0gdHJ1ZQoJCQkJCQlLZXlEb3duUjpGaXJlKC4uLikKCQkJCQllbHNlaWYgTWV0aG9kID09ICJDQ0YiIHRoZW4KCQkJCQkJY2NmLEhpdCA9IC4uLgoJCQkJCWVsc2VpZiBNZXRob2QgPT0gImlzQ2FtZXJhTG9ja2VkIiB0aGVuCgkJCQkJCWlzQ2FtZXJhTG9ja2VkID0gLi4uCgkJCQkJZWxzZWlmIE1ldGhvZCA9PSAiYXR0YWNrIiB0aGVuCgkJCQkJCWxvY2FsIGFyZ3MgPSB7Li4ufQoJCQkJCQlmb3IgXyx2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwoJCQkJCQkJcGNhbGwoZnVuY3Rpb24oKQoJCQkJCQkJCWlmICh2LlBvc2l0aW9uIC0gYXJnc1sxXSkuTWFnbml0dWRlIDw9IGFyZ3NbMl0rKHYuU2l6ZS5NYWduaXR1ZGUvMikgYW5kIG5vdCB0YWJsZS5maW5kKElnbm9yZXMsIHYpIGFuZCB2Lk5hbWUgfj0gIkJhc2UiIGFuZCB2Lk5hbWUgfj0gIkJhc2VwbGF0ZSIgYW5kIG5vdCB2OklzQSgiVGVycmFpbiIpIHRoZW4KCQkJCQkJCQkJTWFpblJlbW90ZTpGaXJlQWxsQ2xpZW50cygiRWZmZWN0Iix7CgkJCQkJCQkJCQlUeXBlID0gIkJveCIsCgkJCQkJCQkJCQlUaW1lID0gbWF0aC5yYW5kb20oNCwxMiksCgkJCQkJCQkJCQlNYXRlcmlhbCA9ICh7CgkJCQkJCQkJCQkJIkdyYW5pdGUiLAoJCQkJCQkJCQkJCSJHbGFzcyIsCgkJCQkJCQkJCQkJIkZvcmNlRmllbGQiLAoJCQkJCQkJCQkJCSJOZW9uIgoJCQkJCQkJCQkJfSlbbWF0aC5yYW5kb20oMSw0KV0sCgkJCQkJCQkJCQlDRnJhbWUgPSB2LkNGcmFtZSwKCQkJCQkJCQkJCVN0YXJ0ID0gewoJCQkJCQkJCQkJCVRyYW5zcGFyZW5jeSA9IHYuVHJhbnNwYXJlbmN5LAoJCQkJCQkJCQkJCVNpemUgPSB2LlNpemUsCgkJCQkJCQkJCQkJQ29sb3IgPSBDb2xvcjMubmV3KDAsMC40LDApLAoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCUVuZCA9IHsKCQkJCQkJCQkJCQlUcmFuc3BhcmVuY3kgPSAxLAoJCQkJCQkJCQkJCVNpemUgPSBWZWN0b3IzLm5ldygpLAoJCQkJCQkJCQkJCUNvbG9yID0gQ29sb3IzLm5ldygwLDAuOCwwKSwKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQlPZmZzZXQgPSBDRnJhbWUubmV3KG1hdGgucmFuZG9tKC0xLDEpLzEwLG1hdGgucmFuZG9tKC0xLDEpLzEwLG1hdGgucmFuZG9tKC0xLDEpLzEwKSwKCQkJCQkJCQkJCU11bHQgPSBDRnJhbWUuQW5nbGVzKG1hdGgucmFkKG1hdGgucmFuZG9tKC0yLDIpKSxtYXRoLnJhZChtYXRoLnJhbmRvbSgtMiwyKSksbWF0aC5yYWQobWF0aC5yYW5kb20oLTIsMikpKQoJCQkJCQkJCQl9KQoJCQkJCQkJCQl2LkNGcmFtZSA9IENGcmFtZS5uZXcoMCw5ZTksMCkKCQkJCQkJCQkJdjpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIkNGcmFtZSIpOkNvbm5lY3QoZnVuY3Rpb24oKQoJCQkJCQkJCQkJaWYgdi5DRnJhbWUgfj0gQ0ZyYW1lLm5ldygwLDllOSwwKSB0aGVuCgkJCQkJCQkJCQkJdi5DRnJhbWUgPSBDRnJhbWUubmV3KDAsOWU5LDApCgkJCQkJCQkJCQllbmQKCQkJCQkJCQkJZW5kKQoJCQkJCQkJCWVuZAoJCQkJCQkJZW5kKQoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVuZCkKCQkJZW5kCgkJCWlmIFBsYXllci5DaGFyYWN0ZXIgdGhlbgoJCQkJZ2FtZTpHZXRTZXJ2aWNlKCJEZWJyaXMiKTpBZGRJdGVtKFBsYXllci5DaGFyYWN0ZXIpCgkJCQlQbGF5ZXIuQ2hhcmFjdGVyID0gbmlsCgkJCWVuZAoJCWVuZCkpCgkJdGFibGUuaW5zZXJ0KENvbm5lY3Rpb25zLGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDpDb25uZWN0KGZ1bmN0aW9uKCkKCQkJaWYgbm90IFBhcmFtcyB0aGVuCgkJCQlQYXJhbXMgPSBSYXljYXN0UGFyYW1zLm5ldygpCgkJCQlQYXJhbXMuRmlsdGVyRGVzY2VuZGFudHNJbnN0YW5jZXMgPSBDaGFyYWN0ZXIKCQkJCUxhc3QgPSB0aWNrKCkKCQkJCUxhc3RKdW1wID0gdGljaygpCgkJCQlNb3ZlbWVudC5GYWxsU3BlZWQgPSAwCgkJCWVuZAoJCQlQYXJhbXMuRmlsdGVyRGVzY2VuZGFudHNJbnN0YW5jZXMgPSBDaGFyYWN0ZXIKCQkJbG9jYWwgUG9zc2libGUgPSBNb3ZlbWVudC5DRnJhbWUKCQkJUG9zc2libGUgPSBDRnJhbWUubmV3KFBvc3NpYmxlLlBvc2l0aW9uLCBWZWN0b3IzLm5ldyhQb3NzaWJsZS5YK2NjZi5Mb29rVmVjdG9yLlgsIE1vdmVtZW50LkZseWluZyBhbmQgUG9zc2libGUuWStjY2YuTG9va1ZlY3Rvci5ZIG9yIFBvc3NpYmxlLlksIFBvc3NpYmxlLlorY2NmLkxvb2tWZWN0b3IuWikpCgkJCWlmIEtleXMuVyB0aGVuCgkJCQlQb3NzaWJsZSA9IFBvc3NpYmxlICogQ0ZyYW1lLm5ldygwLDAsLTEpLS06SW52ZXJzZSgpCgkJCWVuZAoJCQlpZiBLZXlzLlMgdGhlbgoJCQkJUG9zc2libGUgPSBQb3NzaWJsZSAqIENGcmFtZS5uZXcoMCwwLDEpLS06SW52ZXJzZSgpCgkJCWVuZAoJCQlpZiBLZXlzLkEgdGhlbgoJCQkJUG9zc2libGUgPSBQb3NzaWJsZSAqIENGcmFtZS5uZXcoLTEsMCwwKS0tOkludmVyc2UoKQoJCQllbmQKCQkJaWYgS2V5cy5EIHRoZW4KCQkJCVBvc3NpYmxlID0gUG9zc2libGUgKiBDRnJhbWUubmV3KDEsMCwwKS0tOkludmVyc2UoKQoJCQllbmQKCQkJaWYgS2V5cy5KIHRoZW4KCQkJCU1vdmVtZW50LkNGcmFtZSA9IENGcmFtZS5uZXcoMCwxNSwwKS0tOkludmVyc2UoKQoJCQllbmQKCQkJbG9jYWwgYSA9IE1vdmVtZW50LkNGcmFtZSpDRnJhbWUubmV3KDAsMS41LDApCgkJCU1haW5SZW1vdGU6RmlyZUNsaWVudChQbGF5ZXIsICJDYW1lcmFTdWJqZWN0IiwgYSkKCQkJbG9jYWwgT2xkID0gTW92ZW1lbnQuQ0ZyYW1lCgkJCWlmIE1vdmVtZW50LkNGcmFtZS5Qb3NpdGlvbiB+PSBQb3NzaWJsZS5Qb3NpdGlvbiB0aGVuCgkJCQlNb3ZlbWVudC5XYWxraW5nID0gdHJ1ZQoJCQkJTW92ZW1lbnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhNb3ZlbWVudC5DRnJhbWUuUG9zaXRpb24sIFBvc3NpYmxlLlBvc2l0aW9uKSpDRnJhbWUubmV3KDAsMCwodGljaygpLUxhc3QpKi1Nb3ZlbWVudC5XYWxrU3BlZWQpCgkJCWVsc2UKCQkJCU1vdmVtZW50LldhbGtpbmcgPSBmYWxzZQoJCQllbmQKCQkJaWYgaXNDYW1lcmFMb2NrZWQgdGhlbgoJCQkJTW92ZW1lbnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhNb3ZlbWVudC5DRnJhbWUuUG9zaXRpb24sIFZlY3RvcjMubmV3KE1vdmVtZW50LkNGcmFtZS5YK2NjZi5Mb29rVmVjdG9yLlgsIE1vdmVtZW50LkZseWluZyBhbmQgTW92ZW1lbnQuQ0ZyYW1lLlkrY2NmLkxvb2tWZWN0b3IuWSBvciBNb3ZlbWVudC5DRnJhbWUuWSwgTW92ZW1lbnQuQ0ZyYW1lLlorY2NmLkxvb2tWZWN0b3IuWikpCgkJCWVuZAoJCQlNb3ZlbWVudC5Nb3ZpbmdEaXJlY3Rpb24gPSAtKE9sZC5Qb3NpdGlvbiAtIE1vdmVtZW50LkNGcmFtZS5Qb3NpdGlvbikKCQkJbG9jYWwgTGVycENGcmFtZSA9IE9sZDpMZXJwKE1vdmVtZW50LkNGcmFtZSwgLjE1KQoJCQlsb2NhbCBYLFksWiA9IExlcnBDRnJhbWU6VG9PcmllbnRhdGlvbigpOwoJCQlsb2NhbCBMZXJwZWQgPSBub3QgTW92ZW1lbnQuRmx5aW5nIGFuZCBDRnJhbWUubmV3KE1vdmVtZW50LkNGcmFtZS5Qb3NpdGlvbikqQ0ZyYW1lLkFuZ2xlcyhYLFksWikgb3IgTW92ZW1lbnQuQ0ZyYW1lCgkJCU1vdmVtZW50LkNGcmFtZSA9IExlcnBlZAoJCQlsb2NhbCBSYXljYXN0SWdub3JlID0gd29ya3NwYWNlOlJheWNhc3QoTW92ZW1lbnQuQ0ZyYW1lLlBvc2l0aW9uLCBWZWN0b3IzLm5ldygwLC05ZTksMCksIFBhcmFtcykKCQkJaWYgUmF5Y2FzdElnbm9yZSB0aGVuCgkJCQlSYXljYXN0UGFydCA9IFJheWNhc3RJZ25vcmUuSW5zdGFuY2UKCQkJZW5kCgkJCWlmIG5vdCBNb3ZlbWVudC5GbHlpbmcgdGhlbgoJCQkJbG9jYWwgUmF5Y2FzdCA9IHdvcmtzcGFjZTpSYXljYXN0KE1vdmVtZW50LkNGcmFtZS5Qb3NpdGlvbiwgVmVjdG9yMy5uZXcoMCwtNCwwKSwgUGFyYW1zKQoJCQkJaWYgUmF5Y2FzdCB0aGVuCgkJCQkJbG9jYWwgQ2FuUmF5Y2FzdCA9IHRydWUKCQkJCQlpZiBNb3ZlbWVudC5KdW1waW5nIHRoZW4KCQkJCQkJQ2FuUmF5Y2FzdCA9IGZhbHNlCgkJCQkJZW5kCgkJCQkJcGNhbGwoZnVuY3Rpb24oKQoJCQkJCQlpZiBub3QgUmF5Y2FzdC5JbnN0YW5jZS5DYW5Db2xsaWRlIHRoZW4KCQkJCQkJCUNhblJheWNhc3QgPSBmYWxzZQoJCQkJCQllbmQKCQkJCQllbmQpCgkJCQkJaWYgQ2FuUmF5Y2FzdCB0aGVuCgkJCQkJCU1vdmVtZW50LkNGcmFtZSA9IE1vdmVtZW50LkNGcmFtZTpMZXJwKENGcmFtZS5uZXcoMCwoUmF5Y2FzdC5Qb3NpdGlvbi5ZLU1vdmVtZW50LkNGcmFtZS5ZKSszLDApKk1vdmVtZW50LkNGcmFtZSwgLjMpCgkJCQkJZW5kCgkJCQkJaWYgbm90IE1vdmVtZW50Lkp1bXBpbmcgYW5kIChLZXlzWyIgIl0gb3IgS2V5cy5TcGFjZSkgYW5kIHRpY2soKS1MYXN0SnVtcCA+IC42IHRoZW4KCQkJCQkJTW92ZW1lbnQuSnVtcGluZyA9IHRydWUKCQkJCQkJZm9yIGkgPSAxLCAyMiBkbwoJCQkJCQkJTW92ZW1lbnQuQ0ZyYW1lID0gTW92ZW1lbnQuQ0ZyYW1lKiBDRnJhbWUubmV3KDAsMiwwKTpMZXJwKENGcmFtZS5uZXcoKSwgaS8yMikKCQkJCQkJCXRhc2sud2FpdCgpCgkJCQkJCWVuZAoJCQkJCQlMYXN0SnVtcCA9IHRpY2soKQoJCQkJCQlNb3ZlbWVudC5KdW1waW5nID0gZmFsc2UKCQkJCQllbHNlCgkJCQkJCWlmIG5vdCBNb3ZlbWVudC5KdW1waW5nIHRoZW4KCQkJCQkJCU1vdmVtZW50LkZhbGxTcGVlZCA9IDAKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQkJTW92ZW1lbnQuRmFsbGluZyA9IGZhbHNlCgkJCQllbHNlCgkJCQkJaWYgbm90IE1vdmVtZW50Lkp1bXBpbmcgdGhlbgoJCQkJCQlNb3ZlbWVudC5DRnJhbWUgPSBNb3ZlbWVudC5DRnJhbWUqIENGcmFtZS5uZXcoMCwtTW92ZW1lbnQuRmFsbFNwZWVkLDApCgkJCQkJCU1vdmVtZW50LkZhbGxTcGVlZCA9IE1vdmVtZW50LkZhbGxTcGVlZCArIC4wNAoJCQkJCQlNb3ZlbWVudC5GYWxsU3BlZWQgPSBtYXRoLmNsYW1wKE1vdmVtZW50LkZhbGxTcGVlZCwwLDkuNSkKCQkJCQkJTW92ZW1lbnQuRmFsbGluZyA9IHRydWUKCQkJCQllbmQKCQkJCQlpZiBNb3ZlbWVudC5DRnJhbWUuWSA8PSAtMjAwIHRoZW4KCQkJCQkJTW92ZW1lbnQuQ0ZyYW1lID0gTW92ZW1lbnQuQ0ZyYW1lKiBDRnJhbWUubmV3KDAsMjM1LDApCgkJCQkJCU1vdmVtZW50LkZhbGxTcGVlZCA9IDAKCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCQkJTGFzdCA9IHRpY2soKQoJCWVuZCkpCgoJCWZvciBLZXksIFBsYXllcl8gaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0UGxheWVycygpKSBkbwoJCQlsb2NhbCBDbG9uZSA9IENsaWVudDpDbG9uZSgpCgkJCUNsb25lOlNldEF0dHJpYnV0ZSgiTmFtZSIsUGxheWVyLk5hbWUpCgkJCUNsb25lOlNldEF0dHJpYnV0ZSgiVXNlcklkIixQbGF5ZXIuVXNlcklkKQoJCQlDbG9uZS5OYW1lID0gUmFuZG9tU3RyaW5nKG1hdGgucmFuZG9tKDEsMikpCgkJCUNsb25lLlBhcmVudCA9IFBsYXllcl8uUGxheWVyR3VpCgkJZW5kCgkJdGFibGUuaW5zZXJ0KENvbm5lY3Rpb25zLGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLlBsYXllckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oUGxheWVyXykKCQkJbG9jYWwgQ2xvbmUgPSBDbGllbnQ6Q2xvbmUoKQoJCQlDbG9uZTpTZXRBdHRyaWJ1dGUoIk5hbWUiLFBsYXllci5OYW1lKQoJCQlDbG9uZTpTZXRBdHRyaWJ1dGUoIlVzZXJJZCIsUGxheWVyLlVzZXJJZCkKCQkJQ2xvbmUuTmFtZSA9IFJhbmRvbVN0cmluZyhtYXRoLnJhbmRvbSgxLDIpKQoJCQlDbG9uZS5QYXJlbnQgPSBQbGF5ZXJfLlBsYXllckd1aQoJCWVuZCkpCgkJZnVuY3Rpb24gQW5pbWF0aW9ucygpCgkJCWxvY2FsIERlZmF1bHRSb290Sm9pbnRDMCA9IENGcmFtZS5uZXcoMCwgMCwgMCwgLTEsIDAsIDAsIDAsIDAsIDEsIDAsIDEsIC0wKQoJCQlsb2NhbCBEZWZhdWx0TmVja0MwID0gQ0ZyYW1lLm5ldygwLCAxLCAwLCAtMSwgMCwgMCwgMCwgMCwgMSwgMCwgMSwgLTApCgkJCWxvY2FsIERlZmF1bHRMZWZ0U2hvdWxkZXJDMCA9IENGcmFtZS5uZXcoLTEsIDAuNSwgMCwgMCwgMCwgLTEsIDAsIDEsIDAsIDEsIDAsIDApCgkJCWxvY2FsIERlZmF1bHRMZWZ0SGlwQzAgPSBDRnJhbWUubmV3KC0xLCAtMSwgMCwgMCwgMCwgLTEsIDAsIDEsIDAsIDEsIDAsIDApCgkJCWxvY2FsIERlZmF1bHRSaWdodFNob3VsZGVyQzAgPSBDRnJhbWUubmV3KDEsIDAuNSwgMCwgMCwgMCwgMSwgMCwgMSwgLTAsIC0xLCAwLCAwKQoJCQlsb2NhbCBEZWZhdWx0UmlnaHRIaXBDMCA9IENGcmFtZS5uZXcoMSwgLTEsIDAsIDAsIDAsIDEsIDAsIDEsIC0wLCAtMSwgMCwgMCkKCQkJU2luZSA9IHRpY2soKSo2MAoJCQlpZiBNb3ZlbWVudC5BdHRhY2tpbmcgdGhlbgoJCQllbHNlaWYgTW92ZW1lbnQuRmx5aW5nIHRoZW4KCQkJCU1vdmVtZW50LldhbGtTcGVlZCA9IDQ1CgkJCQlpZiBNb3ZlbWVudC5XYWxraW5nIHRoZW4KCQkJCQlsb2NhbCBDYSA9IFNpbmUvMgoJCQkJCVJpZ2h0U2hvdWxkZXIuQzAgPSBMaWIuQ2xlcnAoUmlnaHRTaG91bGRlci5DMCwgIENGcmFtZS5uZXcoMC45LCAwLjI1LTAuMDI1ICogbWF0aC5zaW4oQ2EgLyA4KSwwLjI1LCAwLCAwLCAxLCAwLCAxLCAtMCwgLTEsIDAsIDApKkNGcmFtZS5BbmdsZXMobWF0aC5yYWQoLTEwKSwgbWF0aC5yYWQoLTE1ICsgMTAgKiBtYXRoLmNvcyhDYSAvIDgpKSwgbWF0aC5yYWQoLTQ5IC0gNSAqIG1hdGguY29zKENhIC8gOCkpKSwgIDEvNikKCQkJCQlMZWZ0U2hvdWxkZXIuQzAgPSBMaWIuQ2xlcnAoTGVmdFNob3VsZGVyLkMwLCAgQ0ZyYW1lLm5ldygtMC45LCAwLjI1LTAuMDI1ICogbWF0aC5zaW4oQ2EgLyA4KSwgMC4yNSwgMCwgMCwgLTEsIDAsIDEsIDAsIDEsIDAsIDApKkNGcmFtZS5BbmdsZXMobWF0aC5yYWQoLTEwKSwgbWF0aC5yYWQoMTUgLTEwICogbWF0aC5jb3MoQ2EgLyA4KSksIG1hdGgucmFkKDQ5ICsgNSAqIG1hdGguY29zKENhIC8gOCkpKSwgIDEvNikKCQkJCQlSaWdodEhpcC5DMCA9IExpYi5DbGVycChSaWdodEhpcC5DMCwgIENGcmFtZS5uZXcoMSwgLTEsIDAsIDAsIDAsIDEsIDAsIDEsIC0wLCAtMSwgMCwwKSpDRnJhbWUubmV3KC41LDAuNSsgMC4xNSAqIG1hdGguc2luKENhIC8gOCksMCkgKiBDRnJhbWUuQW5nbGVzKDAsIG1hdGgucmFkKC01KSwgbWF0aC5yYWQoLTIwICsgMTUgKiBtYXRoLmNvcyhDYSAvIDgpKSksICAxLzYpCgkJCQkJTGVmdEhpcC5DMCA9IExpYi5DbGVycChMZWZ0SGlwLkMwLCAgQ0ZyYW1lLm5ldygtMSwgLTEsIDAsIDAsIDAsIC0xLCAwLCAxLCAwLCAxLCAwLCAwKSpDRnJhbWUubmV3KCAtMC4xNSwwLjI1KyAwLjE1ICogbWF0aC5zaW4oQ2EgLyA4KSwwKSpDRnJhbWUuQW5nbGVzKDAsIG1hdGgucmFkKDEwKSwgbWF0aC5yYWQoNSAtIDUgKiBtYXRoLmNvcyhDYSAvIDgpKSksICAxLzYpCgkJCQkJTmVjay5DMCA9IExpYi5DbGVycChOZWNrLkMwLCAgQ0ZyYW1lLm5ldygwLCAxLCAwLCAtMSwgMCwgMCwgMCwgMCwgMSwgMCwgMSwgLTApICogQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCgtMjAgKyA1ICogbWF0aC5jb3MoQ2EgLyA4KSksIG1hdGgucmFkKDApLCBtYXRoLnJhZCgwKSksICAxLzYpCgkJCQkJUm9vdEpvaW50LkMwID0gTGliLkNsZXJwKFJvb3RKb2ludC5DMCwgIENGcmFtZS5uZXcoMCwgMCwgMCwgLTEsIDAsIDAsIDAsIDAsIDEsIDAsIDEsIC0wKSpDRnJhbWUubmV3KDAsMCwgMC41ICogbWF0aC5zaW4oQ2EvOCkpKkNGcmFtZS5BbmdsZXMobWF0aC5yYWQoNDAgLSAxICogbWF0aC5jb3MoQ2EgLyA4KSksMCwwKSwgIDEvNikKCQkJCWVsc2UKCQkJCQlsb2NhbCBDYSA9IFNpbmUvMgoJCQkJCVJpZ2h0U2hvdWxkZXIuQzAgPSBMaWIuQ2xlcnAoUmlnaHRTaG91bGRlci5DMCwgIENGcmFtZS5uZXcoMC45LCAwLjUtMC4wMjUgKiBtYXRoLnNpbihDYSAvIDgpLDAsIDAsIDAsIDEsIDAsIDEsIC0wLCAtMSwgMCwgMCkqQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCgtMTApLCBtYXRoLnJhZCgtMTUgKyAxMCAqIG1hdGguY29zKENhIC8gOCkpLCBtYXRoLnJhZCgtNSAtIDUgKiBtYXRoLnNpbihDYSAvIDgpKSksICAxLzYpCgkJCQkJTGVmdFNob3VsZGVyLkMwID0gTGliLkNsZXJwKExlZnRTaG91bGRlci5DMCwgIENGcmFtZS5uZXcoLTAuOSwgMC41LTAuMDI1ICogbWF0aC5zaW4oQ2EgLyA4KSwgMCwgMCwgMCwgLTEsIDAsIDEsIDAsIDEsIDAsIDApKkNGcmFtZS5BbmdsZXMobWF0aC5yYWQoLTEwKSwgbWF0aC5yYWQoMTUgLTEwICogbWF0aC5jb3MoQ2EgLyA4KSksIG1hdGgucmFkKDUgKyA1ICogbWF0aC5zaW4oQ2EgLyA4KSkpLCAgMS82KQoJCQkJCVJpZ2h0SGlwLkMwID0gTGliLkNsZXJwKFJpZ2h0SGlwLkMwLCAgQ0ZyYW1lLm5ldygxLCAtMSwgMCwgMCwgMCwgMSwgMCwgMSwgLTAsIC0xLCAwLDApKkNGcmFtZS5uZXcoLjUsMC41KyAwLjE1ICogbWF0aC5zaW4oQ2EgLyA4KSwwKSAqIENGcmFtZS5BbmdsZXMoMCwgbWF0aC5yYWQoLTUpLCBtYXRoLnJhZCgtMjAgKyAxNSAqIG1hdGguY29zKENhIC8gOCkpKSwgIDEvNikKCQkJCQlMZWZ0SGlwLkMwID0gTGliLkNsZXJwKExlZnRIaXAuQzAsICBDRnJhbWUubmV3KC0xLCAtMSwgMCwgMCwgMCwgLTEsIDAsIDEsIDAsIDEsIDAsIDApKkNGcmFtZS5uZXcoIC0wLjE1LDAuMjUrIDAuMTUgKiBtYXRoLnNpbihDYSAvIDgpLDApKkNGcmFtZS5BbmdsZXMoMCwgbWF0aC5yYWQoMTApLCBtYXRoLnJhZCg1IC0gNSAqIG1hdGguY29zKENhIC8gOCkpKSwgIDEvNikKCQkJCQlOZWNrLkMwID0gTGliLkNsZXJwKE5lY2suQzAsICBDRnJhbWUubmV3KDAsIDEsIDAsIC0xLCAwLCAwLCAwLCAwLCAxLCAwLCAxLCAtMCkgKiBDRnJhbWUuQW5nbGVzKG1hdGgucmFkKC01ICsgNSAqIG1hdGguY29zKENhIC8gOCkpLCBtYXRoLnJhZCgwKSwgbWF0aC5yYWQoMCkpLCAgMS82KQoJCQkJCVJvb3RKb2ludC5DMCA9IExpYi5DbGVycChSb290Sm9pbnQuQzAsICBDRnJhbWUubmV3KDAsIDAsIDAsIC0xLCAwLCAwLCAwLCAwLCAxLCAwLCAxLCAtMCkqQ0ZyYW1lLm5ldygwLDAsIDAuNSAqIG1hdGguc2luKENhLzgpKSpDRnJhbWUuQW5nbGVzKG1hdGgucmFkKDEwIC0gMSAqIG1hdGguY29zKENhIC8gOCkpLDAsMCksICAxLzYpCgkJCQllbmQKCQkJCXJldHVybgoJCQllbHNlaWYgTW92ZW1lbnQuRmFsbGluZyB0aGVuCgkJCQlyZXR1cm4KCQkJZWxzZWlmIE1vdmVtZW50Lkp1bXBpbmcgdGhlbgoJCQkJcmV0dXJuCgkJCWVsc2VpZiBNb3ZlbWVudC5XYWxraW5nIHRoZW4KCQkJCU1vdmVtZW50LldhbGtTcGVlZCA9IDI1CgkJCQlsb2NhbCBEaXYgPSA0LjUgKyAoMTEyIC8gTW92ZW1lbnQuV2Fsa1NwZWVkKS8yCgkJCQlsb2NhbCBXYWxrU2luID0gbWF0aC5zaW4oU2luZSAvIERpdikKCQkJCWxvY2FsIFdhbGtDb3MgPSBtYXRoLmNvcyhTaW5lIC8gRGl2KQoJCQkJbG9jYWwgVmVsb2NpdHkgPSBNb3ZlbWVudC5Nb3ZpbmdEaXJlY3Rpb24gKiBNb3ZlbWVudC5XYWxrU3BlZWQKCQkJCWxvY2FsIE1vdmVEaXIgPSBDaGFyYWN0ZXIuVG9yc28uQ0ZyYW1lOnZlY3RvclRvT2JqZWN0U3BhY2UoVmVsb2NpdHkpCgkJCQlsb2NhbCBBTE1vdmVEaXIgPSAoQ2hhcmFjdGVyLlRvcnNvLkNGcmFtZSAqIENGcmFtZS5BbmdsZXMoMCxtYXRoLnJhZCg5MCksMCkpOnZlY3RvclRvT2JqZWN0U3BhY2UoVmVsb2NpdHkpCgkJCQlSb290Sm9pbnQuQzAgPSBMaWIuQ2xlcnAoUm9vdEpvaW50LkMwLERlZmF1bHRSb290Sm9pbnRDMCAqIENGcmFtZS5uZXcoMCwwLDAuMiAqIG1hdGguY29zKFNpbmUgLyAoRGl2IC8gMikpKSAqIENGcmFtZS5BbmdsZXMoLU1vdmVEaXIuWi81MCwtTW92ZURpci5YLzEwMCwtTW92ZURpci5YLzUwKSwwLjEpCgkJCQlOZWNrLkMwID0gTGliLkNsZXJwKE5lY2suQzAsRGVmYXVsdE5lY2tDMCAqIENGcmFtZS5BbmdsZXMoMCwwLC1Nb3ZlRGlyLlgvNTApLDAuMSkKCQkJCUxlZnRTaG91bGRlci5DMCA9IExpYi5DbGVycChMZWZ0U2hvdWxkZXIuQzAsRGVmYXVsdExlZnRTaG91bGRlckMwICogQ0ZyYW1lLkFuZ2xlcygoLUFMTW92ZURpci5aLzM1KSAqIFdhbGtTaW4sMCwoQUxNb3ZlRGlyLlgvMjUpICogV2Fsa1NpbikgKiBDRnJhbWUuQW5nbGVzKDAsbWF0aC5yYWQoLTQgKiBXYWxrU2luKSpBTE1vdmVEaXIuWC8xNSwwKSwwLjEpCgkJCQlSaWdodFNob3VsZGVyLkMwID0gTGliLkNsZXJwKFJpZ2h0U2hvdWxkZXIuQzAsRGVmYXVsdFJpZ2h0U2hvdWxkZXJDMCAqIENGcmFtZS5BbmdsZXMoKC1BTE1vdmVEaXIuWi8zNSkgKiBXYWxrU2luLDAsKEFMTW92ZURpci5YLzI1KSAqIFdhbGtTaW4pICAqIENGcmFtZS5BbmdsZXMoMCxtYXRoLnJhZCg0ICogV2Fsa1NpbikqQUxNb3ZlRGlyLlgvMTUsMCksMC4xKQoJCQkJTGVmdEhpcC5DMCA9IExpYi5DbGVycChMZWZ0SGlwLkMwLERlZmF1bHRMZWZ0SGlwQzAgKiBDRnJhbWUubmV3KC0wLjMqV2Fsa0NvcyxXYWxrQ29zICogMC41LDApICogQ0ZyYW1lLkFuZ2xlcygoQUxNb3ZlRGlyLlovMzUpICogV2Fsa1NpbiwwLCgtQUxNb3ZlRGlyLlgvMTUpICogV2Fsa1NpbiksMC4xKQoJCQkJUmlnaHRIaXAuQzAgPSBMaWIuQ2xlcnAoUmlnaHRIaXAuQzAsRGVmYXVsdFJpZ2h0SGlwQzAgKiBDRnJhbWUubmV3KC0wLjMqV2Fsa0NvcywtV2Fsa0NvcyAqIDAuNSwwKSAqIENGcmFtZS5BbmdsZXMoKEFMTW92ZURpci5aLzM1KSAqIFdhbGtTaW4sMCwoLUFMTW92ZURpci5YLzE1KSAqIFdhbGtTaW4pLDAuMSkKCQkJCXJldHVybgoJCQllbHNlCgkJLS1bWwoJCVJpZ2h0U2hvdWxkZXIuQzAgPSBMaWIuQ2xlcnAoUmlnaHRTaG91bGRlci5DMCwgIENGcmFtZS5uZXcoMSwgMC41LCAwLCAwLCAwLCAxLCAwLCAxLCAtMCwgLTEsIDAsIDApKkNGcmFtZS5BbmdsZXMobWF0aC5yYWQoLTMrMiptYXRoLnNpbihTaW5lLzE1KSksbWF0aC5yYWQoLTUpLG1hdGgucmFkKC0yKzEqbWF0aC5zaW4oU2luZS8zMCkpKSwgIDEvNikKCQlMZWZ0U2hvdWxkZXIuQzAgPSBMaWIuQ2xlcnAoTGVmdFNob3VsZGVyLkMwLCAgQ0ZyYW1lLm5ldygtMSwgMC41LCAwLCAwLCAwLCAtMSwgMCwgMSwgMCwgMSwgMCwgMCkqQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCgtMysyKm1hdGguc2luKFNpbmUvMTUpKSxtYXRoLnJhZCg1KSxtYXRoLnJhZCgyLTEqbWF0aC5zaW4oU2luZS8zMCkpKSwgIDEvNikKCQlSaWdodEhpcC5DMCA9IExpYi5DbGVycChSaWdodEhpcC5DMCwgIENGcmFtZS5uZXcoMSwgLTEsIDAsIDAsIDAsIDEsIDAsIDEsIC0wLCAtMSwgMCwgMCkqQ0ZyYW1lLm5ldygwLjErMC4xKm1hdGguY29zKFNpbmUvMTUpLC0wLjEqbWF0aC5jb3MoU2luZS8xNSksMCkqQ0ZyYW1lLkFuZ2xlcygwLG1hdGgucmFkKC01KSxtYXRoLnJhZCgoQ0ZyYW1lLm5ldygpLlBvc2l0aW9uLUNGcmFtZS5uZXcoMC4xKzAuMSptYXRoLmNvcyhTaW5lLzE1KSwwLDApLlBvc2l0aW9uKS5NYWduaXR1ZGUqLTI1KSksICAxLzYpCgkJTGVmdEhpcC5DMCA9IExpYi5DbGVycChMZWZ0SGlwLkMwLCAgQ0ZyYW1lLm5ldygtMSwgLTEsIDAsIDAsIDAsIC0xLCAwLCAxLCAwLCAxLCAwLCAwKSpDRnJhbWUubmV3KC0wLjA1LTAuMDUqbWF0aC5zaW4oU2luZS8xNSksLTAuMSptYXRoLmNvcyhTaW5lLzE1KSwwKSpDRnJhbWUuQW5nbGVzKDAsbWF0aC5yYWQoNSksbWF0aC5yYWQoLShDRnJhbWUubmV3KCkuUG9zaXRpb24tQ0ZyYW1lLm5ldygwLjErMC4xKm1hdGguc2luKFNpbmUvMTUpLDAsMCkuUG9zaXRpb24pLk1hZ25pdHVkZSotMjApKSwgIDEvNikKCQlOZWNrLkMwID0gTGliLkNsZXJwKE5lY2suQzAsICBDRnJhbWUubmV3KDAsIDEsIDAsIC0xLCAwLCAwLCAwLCAwLCAxLCAwLCAxLCAtMCkqQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCg2LTUqbWF0aC5zaW4oU2luZS8xNSkpLDAsbWF0aC5yYWQoLTEwKm1hdGguY29zKFNpbmUvNzApKSksICAxLzYpCgkJUm9vdEpvaW50LkMwID0gTGliLkNsZXJwKFJvb3RKb2ludC5DMCwgIENGcmFtZS5uZXcoMCwgMCwgMCwgLTEsIDAsIDAsIDAsIDAsIDEsIDAsIDEsIC0wKSpDRnJhbWUubmV3KDAsMCwwLjEqbWF0aC5jb3MoU2luZS8xNSkpLCAgMS82KQoJCV1dCgkJCQlSaWdodFNob3VsZGVyLkMwID0gTGliLkNsZXJwKFJpZ2h0U2hvdWxkZXIuQzAsICBDRnJhbWUubmV3KDEsIDAuNSwgMCwgMCwgMCwgMSwgMCwgMSwgLTAsIC0xLCAwLCAwKSpDRnJhbWUuQW5nbGVzKG1hdGgucmFkKDEqbWF0aC5jb3MoU2luZS8zMCkpLDAsbWF0aC5yYWQoMiptYXRoLnNpbihTaW5lLzMwKSkpKkNGcmFtZS5uZXcoMC4wMiptYXRoLnNpbihTaW5lLzMwKSwwLjA0MSptYXRoLmNvcyhTaW5lLzMwKSwwKSwgIDEvNikKCQkJCUxlZnRTaG91bGRlci5DMCA9IExpYi5DbGVycChMZWZ0U2hvdWxkZXIuQzAsICBDRnJhbWUubmV3KC0xLCAwLjUsIDAsIDAsIDAsIC0xLCAwLCAxLCAwLCAxLCAwLCAwKSpDRnJhbWUuQW5nbGVzKG1hdGgucmFkKDAuNSptYXRoLmNvcyhTaW5lLzMwKSksMCxtYXRoLnJhZCgtNCptYXRoLnNpbihTaW5lLzMwKSkpKkNGcmFtZS5uZXcoLTAuMDQqbWF0aC5zaW4oU2luZS8zMCksMC4wNDEqbWF0aC5jb3MoU2luZS8zMCksMCksICAxLzYpCgkJCQlSaWdodEhpcC5DMCA9IExpYi5DbGVycChSaWdodEhpcC5DMCwgIENGcmFtZS5uZXcoMSwgLTEsIDAsIDAsIDAsIDEsIDAsIDEsIC0wLCAtMSwgMCwgMCkqQ0ZyYW1lLkFuZ2xlcygwLDAsbWF0aC5yYWQoMS41Km1hdGguc2luKFNpbmUvMzUpKSkqQ0ZyYW1lLm5ldygwLC0wLjAyKm1hdGguc2luKFNpbmUvMzApLDApLCAgMS82KQoJCQkJTGVmdEhpcC5DMCA9IExpYi5DbGVycChMZWZ0SGlwLkMwLCAgQ0ZyYW1lLm5ldygtMSwgLTEsIDAsIDAsIDAsIC0xLCAwLCAxLCAwLCAxLCAwLCAwKSpDRnJhbWUuQW5nbGVzKDAsMCxtYXRoLnJhZCgxKm1hdGguc2luKFNpbmUvMzUpKSkqQ0ZyYW1lLm5ldygwLC0wLjAyKm1hdGguc2luKFNpbmUvMzApLDApLCAgMS82KQoJCQkJTmVjay5DMCA9IExpYi5DbGVycChOZWNrLkMwLCAgQ0ZyYW1lLm5ldygwLCAxLCAwLCAtMSwgMCwgMCwgMCwgMCwgMSwgMCwgMSwgLTApKkNGcmFtZS5BbmdsZXMobWF0aC5yYWQoLTIqbWF0aC5jb3MoU2luZS8zMCkpLG1hdGgucmFkKDEqbWF0aC5jb3MoU2luZS8zMCkpLG1hdGgucmFkKDIqbWF0aC5zaW4oU2luZS8zMCkpKSwgIDEvNikKCQkJCVJvb3RKb2ludC5DMCA9IExpYi5DbGVycChSb290Sm9pbnQuQzAsICBDRnJhbWUubmV3KDAsIDAsIDAsIC0xLCAwLCAwLCAwLCAwLCAxLCAwLCAxLCAtMCkqQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCgtMS41Km1hdGguc2luKFNpbmUvMzApKSwwLDApKkNGcmFtZS5uZXcoMCwwLDAuMDIqbWF0aC5zaW4oU2luZS8zMCkpLCAgMS82KQoJCQllbmQKCQllbmQKCQlmdW5jdGlvbiBFZmZlY3RzKCkKCQkJaWYgTW92ZW1lbnQuS2lsbEF1cmEgdGhlbgoJCQkJaWYgbWF0aC5yYW5kb20oMSw0KSA9PSBtYXRoLnJhbmRvbSgxLDQpIHRoZW4KCQkJCQlmb3IgXyx2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwoJCQkJCQlwY2FsbChmdW5jdGlvbigpCgkJCQkJCQlpZiAodi5Qb3NpdGlvbiAtIE1vdmVtZW50LkNGcmFtZS5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEyKyh2LlNpemUuTWFnbml0dWRlLzIpIGFuZCBub3QgdGFibGUuZmluZChJZ25vcmVzLCB2KSBhbmQgdiB+PSBSYXljYXN0UGFydCBhbmQgdi5OYW1lIH49ICJCYXNlIiBhbmQgdi5OYW1lIH49ICJCYXNlcGxhdGUiIGFuZCBub3QgdjpJc0EoIlRlcnJhaW4iKSB0aGVuCgkJCQkJCQkJTWFpblJlbW90ZTpGaXJlQWxsQ2xpZW50cygiRWZmZWN0Iix7CgkJCQkJCQkJCVR5cGUgPSAiQm94IiwKCQkJCQkJCQkJVGltZSA9IG1hdGgucmFuZG9tKDQsMTIpLAoJCQkJCQkJCQlNYXRlcmlhbCA9ICh7CgkJCQkJCQkJCQkiR3Jhbml0ZSIsCgkJCQkJCQkJCQkiR2xhc3MiLAoJCQkJCQkJCQkJIkZvcmNlRmllbGQiLAoJCQkJCQkJCQkJIk5lb24iCgkJCQkJCQkJCX0pW21hdGgucmFuZG9tKDEsNCldLAoJCQkJCQkJCQlDRnJhbWUgPSB2LkNGcmFtZSwKCQkJCQkJCQkJU3RhcnQgPSB7CgkJCQkJCQkJCQlUcmFuc3BhcmVuY3kgPSB2LlRyYW5zcGFyZW5jeSwKCQkJCQkJCQkJCVNpemUgPSB2LlNpemUsCgkJCQkJCQkJCQlDb2xvciA9IENvbG9yMy5uZXcobWF0aC5yYW5kb20oKSwwLDApLAoJCQkJCQkJCQl9LAoJCQkJCQkJCQlFbmQgPSB7CgkJCQkJCQkJCQlUcmFuc3BhcmVuY3kgPSAxLAoJCQkJCQkJCQkJU2l6ZSA9IFZlY3RvcjMubmV3KCksCgkJCQkJCQkJCQlDb2xvciA9IENvbG9yMy5uZXcobWF0aC5yYW5kb20oKSwwLDApLAoJCQkJCQkJCQl9LAoJCQkJCQkJCQlPZmZzZXQgPSBDRnJhbWUubmV3KG1hdGgucmFuZG9tKC0xLDEpLzEwLG1hdGgucmFuZG9tKC0xLDEpLzEwLG1hdGgucmFuZG9tKC0xLDEpLzEwKSwKCQkJCQkJCQkJTXVsdCA9IENGcmFtZS5BbmdsZXMobWF0aC5yYWQobWF0aC5yYW5kb20oLTIsMikpLG1hdGgucmFkKG1hdGgucmFuZG9tKC0yLDIpKSxtYXRoLnJhZChtYXRoLnJhbmRvbSgtMiwyKSkpCgkJCQkJCQkJfSkKCQkJCQkJCQl2LkNGcmFtZSA9IENGcmFtZS5uZXcoMCw5ZTksMCkKCQkJCQkJCQl2OkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiQ0ZyYW1lIik6Q29ubmVjdChmdW5jdGlvbigpCgkJCQkJCQkJCWlmIHYuQ0ZyYW1lIH49IENGcmFtZS5uZXcoMCw5ZTksMCkgdGhlbgoJCQkJCQkJCQkJdi5DRnJhbWUgPSBDRnJhbWUubmV3KDAsOWU5LDApCgkJCQkJCQkJCWVuZAoJCQkJCQkJCWVuZCkKCQkJCQkJCWVuZAoJCQkJCQllbmQpCgkJCQkJZW5kCgkJCQllbmQKCQkJCU1haW5SZW1vdGU6RmlyZUFsbENsaWVudHMoIkVmZmVjdCIsewoJCQkJCVR5cGUgPSAiQm94IiwKCQkJCQlUaW1lID0gMC41LAoJCQkJCU1hdGVyaWFsID0gKHsKCQkJCQkJIkdyYW5pdGUiLAoJCQkJCQkiR2xhc3MiLAoJCQkJCQkiRm9yY2VGaWVsZCIsCgkJCQkJCSJOZW9uIgoJCQkJCX0pW21hdGgucmFuZG9tKDEsNCldLAoJCQkJCUNGcmFtZSA9IE1vdmVtZW50LkNGcmFtZSAqIENGcmFtZS5uZXcoNCptYXRoLnNpbihTaW5lLzEyKSwzKm1hdGguc2luKFNpbmUvMjIpLC00Km1hdGguY29zKFNpbmUvMTIpKSpDRnJhbWUuQW5nbGVzKG1hdGgucmFuZG9tKC1tYXRoLnBpLG1hdGgucGkpLG1hdGgucmFuZG9tKC1tYXRoLnBpLG1hdGgucGkpLG1hdGgucmFuZG9tKC1tYXRoLnBpLG1hdGgucGkpKSwKCQkJCQlTdGFydCA9IHsKCQkJCQkJVHJhbnNwYXJlbmN5ID0gMCwKCQkJCQkJU2l6ZSA9IFZlY3RvcjMubmV3KDIsMiwyKSwKCQkJCQkJQ29sb3IgPSBDb2xvcjMubmV3KG1hdGgucmFuZG9tKCksMCwwKSwKCQkJCQl9LAoJCQkJCUVuZCA9IHsKCQkJCQkJVHJhbnNwYXJlbmN5ID0gMSwKCQkJCQkJU2l6ZSA9IFZlY3RvcjMubmV3KCksCgkJCQkJCUNvbG9yID0gQ29sb3IzLm5ldyhtYXRoLnJhbmRvbSgpLDAsMCksCgkJCQkJfQoJCQkJfSkKCQkJCU1haW5SZW1vdGU6RmlyZUFsbENsaWVudHMoIkVmZmVjdCIsewoJCQkJCVR5cGUgPSAiQm94IiwKCQkJCQlUaW1lID0gMC41LAoJCQkJCU1hdGVyaWFsID0gKHsKCQkJCQkJIkdyYW5pdGUiLAoJCQkJCQkiR2xhc3MiLAoJCQkJCQkiRm9yY2VGaWVsZCIsCgkJCQkJCSJOZW9uIgoJCQkJCX0pW21hdGgucmFuZG9tKDEsNCldLAoJCQkJCUNGcmFtZSA9IE1vdmVtZW50LkNGcmFtZSAqIENGcmFtZS5uZXcoLTgqbWF0aC5jb3MoU2luZS8yMiksOCptYXRoLnNpbihTaW5lLzEyKSw4Km1hdGguc2luKFNpbmUvMjIpKSpDRnJhbWUuQW5nbGVzKG1hdGgucmFuZG9tKC1tYXRoLnBpLG1hdGgucGkpLG1hdGgucmFuZG9tKC1tYXRoLnBpLG1hdGgucGkpLG1hdGgucmFuZG9tKC1tYXRoLnBpLG1hdGgucGkpKSwKCQkJCQlTdGFydCA9IHsKCQkJCQkJVHJhbnNwYXJlbmN5ID0gMCwKCQkJCQkJU2l6ZSA9IFZlY3RvcjMubmV3KDIsMiwyKSwKCQkJCQkJQ29sb3IgPSBDb2xvcjMubmV3KG1hdGgucmFuZG9tKCksMCwwKSwKCQkJCQl9LAoJCQkJCUVuZCA9IHsKCQkJCQkJVHJhbnNwYXJlbmN5ID0gMSwKCQkJCQkJU2l6ZSA9IFZlY3RvcjMubmV3KCksCgkJCQkJCUNvbG9yID0gQ29sb3IzLm5ldyhtYXRoLnJhbmRvbSgpLDAsMCksCgkJCQkJfQoJCQkJfSkKCQkJCU1haW5SZW1vdGU6RmlyZUFsbENsaWVudHMoIkVmZmVjdCIsewoJCQkJCVR5cGUgPSAiQm94IiwKCQkJCQlUaW1lID0gMC41LAoJCQkJCU1hdGVyaWFsID0gKHsKCQkJCQkJIkdyYW5pdGUiLAoJCQkJCQkiR2xhc3MiLAoJCQkJCQkiRm9yY2VGaWVsZCIsCgkJCQkJCSJOZW9uIgoJCQkJCX0pW21hdGgucmFuZG9tKDEsNCldLAoJCQkJCUNGcmFtZSA9IE1vdmVtZW50LkNGcmFtZSAqIENGcmFtZS5uZXcoLTEyKm1hdGguY29zKFNpbmUvMTQpLDYqbWF0aC5zaW4oU2luZS8xNiksMTIqbWF0aC5zaW4oU2luZS8xNCkpKkNGcmFtZS5BbmdsZXMobWF0aC5yYW5kb20oLW1hdGgucGksbWF0aC5waSksbWF0aC5yYW5kb20oLW1hdGgucGksbWF0aC5waSksbWF0aC5yYW5kb20oLW1hdGgucGksbWF0aC5waSkpLAoJCQkJCVN0YXJ0ID0gewoJCQkJCQlUcmFuc3BhcmVuY3kgPSAwLAoJCQkJCQlTaXplID0gVmVjdG9yMy5uZXcoMiwyLDIpLAoJCQkJCQlDb2xvciA9IENvbG9yMy5uZXcobWF0aC5yYW5kb20oKSwwLDApLAoJCQkJCX0sCgkJCQkJRW5kID0gewoJCQkJCQlUcmFuc3BhcmVuY3kgPSAxLAoJCQkJCQlTaXplID0gVmVjdG9yMy5uZXcoKSwKCQkJCQkJQ29sb3IgPSBDb2xvcjMubmV3KG1hdGgucmFuZG9tKCksMCwwKSwKCQkJCQl9CgkJCQl9KQoJCQllbmQKCQllbmQKCQl0YWJsZS5pbnNlcnQoQ29ubmVjdGlvbnMsZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQoJCQlBbmltYXRpb25zKCkKCQkJRWZmZWN0cygpCgkJCUNGcmFtZXMuVG9yc28gPSAoTW92ZW1lbnQuQ0ZyYW1lKSAqIExpYi5JbnZlcnNlKFJvb3RKb2ludCkKCQkJQ0ZyYW1lcy5IZWFkID0gKE1vdmVtZW50LkNGcmFtZSkgKiBMaWIuSW52ZXJzZShSb290Sm9pbnQpICogTGliLkludmVyc2UoTmVjaykKCQkJQ0ZyYW1lcy5SaWdodEFybSA9IChNb3ZlbWVudC5DRnJhbWUpICogTGliLkludmVyc2UoUm9vdEpvaW50KSAqIExpYi5JbnZlcnNlKFJpZ2h0U2hvdWxkZXIpCgkJCUNGcmFtZXMuTGVmdEFybSA9IChNb3ZlbWVudC5DRnJhbWUpICogTGliLkludmVyc2UoUm9vdEpvaW50KSAqIExpYi5JbnZlcnNlKExlZnRTaG91bGRlcikKCQkJQ0ZyYW1lcy5SaWdodExlZyA9IChNb3ZlbWVudC5DRnJhbWUpICogTGliLkludmVyc2UoUm9vdEpvaW50KSAqIExpYi5JbnZlcnNlKFJpZ2h0SGlwKQoJCQlDRnJhbWVzLkxlZnRMZWcgPSAoTW92ZW1lbnQuQ0ZyYW1lKSAqIExpYi5JbnZlcnNlKFJvb3RKb2ludCkgKiBMaWIuSW52ZXJzZShMZWZ0SGlwKQoJCQlmb3IgTmFtZSxQb3NpdGlvbiBpbiBwYWlycyhDRnJhbWVzKSBkbwoJCQkJcGNhbGwoZnVuY3Rpb24oKQoJCQkJCWlmIChDaGFyYWN0ZXJbTmFtZV0uUG9zaXRpb24gLSBQb3NpdGlvbi5Qb3NpdGlvbikuTWFnbml0dWRlID49IDQ1IHRoZW4KCQkJCQkJZ2FtZTpHZXRTZXJ2aWNlKCJEZWJyaXMiKTpBZGRJdGVtKENoYXJhY3RlcltOYW1lXSwwKQoJCQkJCWVuZAoJCQkJCUNoYXJhY3RlcltOYW1lXS5DRnJhbWUgPSBQb3NpdGlvbgoJCQkJZW5kKQoJCQllbmQKCQkJZm9yIF8sdiBpbiBwYWlycyhDaGFyYWN0ZXIpIGRvCgkJCQlpZiBub3QgdGFibGUuZmluZChJZ25vcmVzLCB2KSB0aGVuCgkJCQkJdGFibGUuaW5zZXJ0KElnbm9yZXMsIHYpCgkJCQllbmQKCQkJZW5kCgkJZW5kKSkKCQlmdW5jdGlvbiBDaGF0KE1lc3NhZ2UpCgkJCXRhc2suc3Bhd24oZnVuY3Rpb24oKQoJCQkJZm9yIF8sIHYgaW4gcGFpcnMod29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCgkJCQkJaWYgdi5OYW1lID09ICJDaGF0R3VpIiB0aGVuCgkJCQkJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJCQkJCXYuU3R1ZHNPZmZzZXRXb3JsZFNwYWNlID0gdi5TdHVkc09mZnNldFdvcmxkU3BhY2UgKyBWZWN0b3IzLm5ldygwLDIsMCkKCQkJCQkJZW5kKQoJCQkJCWVuZAoJCQkJZW5kCgkJCQlsb2NhbCBHdWkgPSBDbG9uZS5DaGF0R3VpOkNsb25lKCkKCQkJCWxvY2FsIFRlbXBsYXRlID0gR3VpLkNoYXI6Q2xvbmUoKQoJCQkJR3VpLkNoYXI6RGVzdHJveSgpCgkJCQlHdWkuUGFyZW50ID0gd29ya3NwYWNlCgkJCQlHdWkuQWRvcm5lZSA9IENoYXJhY3Rlci5IZWFkCgkJCQlsb2NhbCBTdGFydCA9IHRpY2soKQoJCQkJbG9jYWwgbGFzdCA9IDMKCQkJCWZvciBpID0gMSwgIyBNZXNzYWdlIGRvCgkJCQkJR3VpLkFkb3JuZWUgPSBDaGFyYWN0ZXIuSGVhZAoJCQkJCWxvY2FsIENoYXIgPSBUZW1wbGF0ZTpDbG9uZSgpCgkJCQkJQ2hhci5QYXJlbnQgPSBHdWkKCQkJCQlDaGFyLlRleHQgPSBNZXNzYWdlOnN1YihpLCBpKQoJCQkJCUNoYXIuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDEKCQkJCQlDaGFyLlRleHRUcmFuc3BhcmVuY3kgPSAxCgkJCQkJbG9jYWwgYSA9IENvbG9yMy5mcm9tSFNWKHRpY2soKSUyLzIsMSwxKQoJCQkJCUNoYXIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE1NSwwLDApCgkJCQkJQ2hhci5OYW1lID0gUmFuZG9tU3RyaW5nKG1hdGgucmFuZG9tKDEsMikpCgkJCQkJdGFzay5zcGF3bihmdW5jdGlvbigpCgkJCQkJCXdoaWxlIEd1aTpJc0Rlc2NlbmRhbnRPZih3b3Jrc3BhY2UpIGRvCgkJCQkJCQlHdWkuQWRvcm5lZSA9IENoYXJhY3Rlci5IZWFkCgkJCQkJCQlDaGFyLlRleHRTdHJva2VDb2xvcjMgPSBDb2xvcjMubmV3KC4xLC4xLC4xKQoJCQkJCQkJQ2hhci5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTU1LDAsMCkKCQkJCQkJCXRhc2sud2FpdCgpCgkJCQkJCWVuZAoJCQkJCWVuZCkKCQkJCQlpZiB0aWNrKCktbGFzdCA+IC4wMyB0aGVuCgkJCQkJCWxhc3QgPSB0aWNrKCkKCQkJCQkJbG9jYWwgU291bmQgPSBJbnN0YW5jZS5uZXcoIlNvdW5kIixDaGFyYWN0ZXIuSGVhZCkKCQkJCQkJU291bmQuUGxheU9uUmVtb3ZlID0gdHJ1ZQoJCQkJCQlTb3VuZC5QbGF5YmFja1NwZWVkID0gbWF0aC5yYW5kb20oODAsMTEwKS8xMDAKCQkJCQkJU291bmQuTmFtZSA9IFJhbmRvbVN0cmluZyhtYXRoLnJhbmRvbSgxLDIpKQoJCQkJCQlTb3VuZC5Tb3VuZElkID0gInJieGFzc2V0aWQ6Ly8xMTMwMjAwOTA4IgoJCQkJCQlTb3VuZC5Wb2x1bWUgPSAyCgkJCQkJCVNvdW5kOkRlc3Ryb3koKQoJCQkJCWVuZAoJCQkJCWdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik6Q3JlYXRlKENoYXIsIFR3ZWVuSW5mby5uZXcoLjMpLCB7CgkJCQkJCVRleHRUcmFuc3BhcmVuY3kgPSAwLAoJCQkJCQlUZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41LAoJCQkJCX0pOlBsYXkoKQoJCQkJCWZvciBpPTEsMiBkbyBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6V2FpdCgpZW5kCgkJCQllbmQKCQkJCXRhc2sud2FpdChtYXRoLmNsYW1wKCNNZXNzYWdlLzksMC40LDEwKSkKCQkJCWZvciBfLCB2IGluIHBhaXJzKEd1aTpHZXRDaGlsZHJlbigpKSBkbwoJCQkJCWlmIHY6SXNBKCJUZXh0TGFiZWwiKSBvciB2Lk5hbWUgPT0gIkNoYXIiIHRoZW4KCQkJCQkJZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTpDcmVhdGUodiwgVHdlZW5JbmZvLm5ldyguMyksIHsKCQkJCQkJCVRleHRUcmFuc3BhcmVuY3kgPSAxLAoJCQkJCQkJVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDEsCgkJCQkJCX0pOlBsYXkoKQoJCQkJCQlnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0odiwwLjMpCgkJCQkJCXRhc2sud2FpdCgpCgkJCQkJZW5kCgkJCQllbmQKCQkJCXJlcGVhdCB0YXNrLndhaXQoKSB1bnRpbCAjR3VpOkdldENoaWxkcmVuKCkgPT0gMQoJCQkJR3VpOkRlc3Ryb3koKQoJCQllbmQpCgkJZW5kCgkJUGxheWVyLkNoYXR0ZWQ6Q29ubmVjdChDaGF0KQoJCUNoYXQoInRlc3QiKQoJCUtleURvd246Q29ubmVjdChmdW5jdGlvbihLZXkpCgkJCWlmIEtleSA9PSAiQyIgdGhlbgoJCQkJTW92ZW1lbnQuV2Fsa1NwZWVkID0gNAoJCQkJTW92ZW1lbnQuQXR0YWNraW5nID0gdHJ1ZQoJCQkJZm9yIGkgPSAxLCAxMCBkbwoJCQkJCVJpZ2h0U2hvdWxkZXIuQzAgPSBMaWIuQ2xlcnAoUmlnaHRTaG91bGRlci5DMCwgIENGcmFtZS5uZXcoMSwgMC41LCAwLCAwLCAwLCAxLCAwLCAxLCAtMCwgLTEsIDAsIDApKkNGcmFtZS5BbmdsZXMobWF0aC5yYWQoMSptYXRoLmNvcyhTaW5lLzMwKSksMCxtYXRoLnJhZCgyKm1hdGguc2luKFNpbmUvMzApKSkqQ0ZyYW1lLm5ldygwLjAyKm1hdGguc2luKFNpbmUvMzApLDAuMDQxKm1hdGguY29zKFNpbmUvMzApLDApLCAgMS82KQoJCQkJCUxlZnRTaG91bGRlci5DMCA9IExpYi5DbGVycChMZWZ0U2hvdWxkZXIuQzAsICBDRnJhbWUubmV3KC0xLCAwLjUsIDAsIDAsIDAsIC0xLCAwLCAxLCAwLCAxLCAwLCAwKSpDRnJhbWUuQW5nbGVzKG1hdGgucmFkKDAuNSptYXRoLmNvcyhTaW5lLzMwKSksMCxtYXRoLnJhZCgtNCptYXRoLnNpbihTaW5lLzMwKSkpKkNGcmFtZS5uZXcoLTAuMDQqbWF0aC5zaW4oU2luZS8zMCksMC4wNDEqbWF0aC5jb3MoU2luZS8zMCksMCkqQ0ZyYW1lLkFuZ2xlcygwLDAsbWF0aC5yYWQoMTYwKSksICAxLzIpCgkJCQkJUmlnaHRIaXAuQzAgPSBMaWIuQ2xlcnAoUmlnaHRIaXAuQzAsICBDRnJhbWUubmV3KDEsIC0xLCAwLCAwLCAwLCAxLCAwLCAxLCAtMCwgLTEsIDAsIDApKkNGcmFtZS5BbmdsZXMoMCwwLG1hdGgucmFkKDEuNSptYXRoLnNpbihTaW5lLzM1KSkpKkNGcmFtZS5uZXcoMCwtMC4wMiptYXRoLnNpbihTaW5lLzMwKSwwKSwgIDEvNikKCQkJCQlMZWZ0SGlwLkMwID0gTGliLkNsZXJwKExlZnRIaXAuQzAsICBDRnJhbWUubmV3KC0xLCAtMSwgMCwgMCwgMCwgLTEsIDAsIDEsIDAsIDEsIDAsIDApKkNGcmFtZS5BbmdsZXMoMCwwLG1hdGgucmFkKDEqbWF0aC5zaW4oU2luZS8zNSkpKSpDRnJhbWUubmV3KDAsLTAuMDIqbWF0aC5zaW4oU2luZS8zMCksMCksICAxLzYpCgkJCQkJTmVjay5DMCA9IExpYi5DbGVycChOZWNrLkMwLCAgQ0ZyYW1lLm5ldygwLCAxLCAwLCAtMSwgMCwgMCwgMCwgMCwgMSwgMCwgMSwgLTApKkNGcmFtZS5BbmdsZXMobWF0aC5yYWQoLTIqbWF0aC5jb3MoU2luZS8zMCkpLG1hdGgucmFkKDEqbWF0aC5jb3MoU2luZS8zMCkpLG1hdGgucmFkKDIqbWF0aC5zaW4oU2luZS8zMCkpKSwgIDEvNikKCQkJCQlSb290Sm9pbnQuQzAgPSBMaWIuQ2xlcnAoUm9vdEpvaW50LkMwLCAgQ0ZyYW1lLm5ldygwLCAwLCAwLCAtMSwgMCwgMCwgMCwgMCwgMSwgMCwgMSwgLTApKkNGcmFtZS5BbmdsZXMobWF0aC5yYWQoLTEuNSptYXRoLnNpbihTaW5lLzMwKSksMCwwKSpDRnJhbWUubmV3KDAsMCwwLjAyKm1hdGguc2luKFNpbmUvMzApKSwgIDEvNikKCQkJCQl0YXNrLndhaXQoKQoJCQkJZW5kCgkJCQl0YXNrLndhaXQoKQoJCQkJTWFpblJlbW90ZTpGaXJlQWxsQ2xpZW50cygiQnVsbGV0IixDRnJhbWVzLkxlZnRBcm0sSGl0IG9yIENGcmFtZS5uZXcoKSkKCQkJCXRhc2suc3Bhd24oZnVuY3Rpb24oKQoJCQkJCXRhc2sud2FpdCguNCkKCQkJCQlsb2NhbCBIaXRTcGFtID0gSGl0OwoJCQkJCWxvY2FsIFRpbWVzID0gMAoJCQkJCXJlcGVhdCB0YXNrLndhaXQoLjEpCgkJCQkJCVRpbWVzID0gVGltZXMgKyAxCgkJCQkJCWZvciBfLHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCgkJCQkJCQlwY2FsbChmdW5jdGlvbigpCgkJCQkJCQkJaWYgKHYuUG9zaXRpb24gLSBIaXRTcGFtLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTIrKHYuU2l6ZS5NYWduaXR1ZGUvMikgYW5kIG5vdCB0YWJsZS5maW5kKElnbm9yZXMsIHYpIGFuZCB2IH49IFJheWNhc3RQYXJ0IGFuZCB2Lk5hbWUgfj0gIkJhc2UiIGFuZCB2Lk5hbWUgfj0gIkJhc2VwbGF0ZSIgYW5kIG5vdCB2OklzQSgiVGVycmFpbiIpIHRoZW4KCQkJCQkJCQkJTWFpblJlbW90ZTpGaXJlQWxsQ2xpZW50cygiRWZmZWN0Iix7CgkJCQkJCQkJCQlUeXBlID0gIkJveCIsCgkJCQkJCQkJCQlUaW1lID0gbWF0aC5yYW5kb20oNCwxMiksCgkJCQkJCQkJCQlNYXRlcmlhbCA9ICh7CgkJCQkJCQkJCQkJIkdyYW5pdGUiLAoJCQkJCQkJCQkJCSJHbGFzcyIsCgkJCQkJCQkJCQkJIkZvcmNlRmllbGQiLAoJCQkJCQkJCQkJCSJOZW9uIgoJCQkJCQkJCQkJfSlbbWF0aC5yYW5kb20oMSw0KV0sCgkJCQkJCQkJCQlDRnJhbWUgPSB2LkNGcmFtZSwKCQkJCQkJCQkJCVN0YXJ0ID0gewoJCQkJCQkJCQkJCVRyYW5zcGFyZW5jeSA9IHYuVHJhbnNwYXJlbmN5LAoJCQkJCQkJCQkJCVNpemUgPSB2LlNpemUsCgkJCQkJCQkJCQkJQ29sb3IgPSBDb2xvcjMubmV3KG1hdGgucmFuZG9tKCksMCwwKSwKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQlFbmQgPSB7CgkJCQkJCQkJCQkJVHJhbnNwYXJlbmN5ID0gMSwKCQkJCQkJCQkJCQlTaXplID0gVmVjdG9yMy5uZXcoKSwKCQkJCQkJCQkJCQlDb2xvciA9IENvbG9yMy5uZXcobWF0aC5yYW5kb20oKSwwLDApLAoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCU9mZnNldCA9IENGcmFtZS5uZXcobWF0aC5yYW5kb20oLTEsMSkvMTAsbWF0aC5yYW5kb20oLTEsMSkvMTAsbWF0aC5yYW5kb20oLTEsMSkvMTApLAoJCQkJCQkJCQkJTXVsdCA9IENGcmFtZS5BbmdsZXMobWF0aC5yYWQobWF0aC5yYW5kb20oLTIsMikpLG1hdGgucmFkKG1hdGgucmFuZG9tKC0yLDIpKSxtYXRoLnJhZChtYXRoLnJhbmRvbSgtMiwyKSkpCgkJCQkJCQkJCX0pCgkJCQkJCQkJCXYuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygwLDllOSwwKQoJCQkJCQkJCQl2OkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiQ0ZyYW1lIik6Q29ubmVjdChmdW5jdGlvbigpCgkJCQkJCQkJCQlpZiB2LkNGcmFtZSB+PSBDRnJhbWUubmV3KDAsOWU5LDApIHRoZW4KCQkJCQkJCQkJCQl2LkNGcmFtZSA9IENGcmFtZS5uZXcoMCw5ZTksMCkKCQkJCQkJCQkJCWVuZAoJCQkJCQkJCQllbmQpCgkJCQkJCQkJZW5kCgkJCQkJCQllbmQpCgkJCQkJCWVuZAoJCQkJCXVudGlsIFRpbWVzID49IDI1CgkJCQllbmQpCgkJCQlmb3IgaSA9IDEsIDEwIGRvCgkJCQkJUmlnaHRTaG91bGRlci5DMCA9IExpYi5DbGVycChSaWdodFNob3VsZGVyLkMwLCAgQ0ZyYW1lLm5ldygxLCAwLjUsIDAsIDAsIDAsIDEsIDAsIDEsIC0wLCAtMSwgMCwgMCkqQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCgxKm1hdGguY29zKFNpbmUvMzApKSwwLG1hdGgucmFkKDIqbWF0aC5zaW4oU2luZS8zMCkpKSpDRnJhbWUubmV3KDAuMDIqbWF0aC5zaW4oU2luZS8zMCksMC4wNDEqbWF0aC5jb3MoU2luZS8zMCksMCksICAxLzYpCgkJCQkJTGVmdFNob3VsZGVyLkMwID0gTGliLkNsZXJwKExlZnRTaG91bGRlci5DMCwgIENGcmFtZS5uZXcoLTEsIDAuNSwgMCwgMCwgMCwgLTEsIDAsIDEsIDAsIDEsIDAsIDApKkNGcmFtZS5BbmdsZXMobWF0aC5yYWQoMC41Km1hdGguY29zKFNpbmUvMzApKSwwLG1hdGgucmFkKC00Km1hdGguc2luKFNpbmUvMzApKSkqQ0ZyYW1lLm5ldygtMC4yLTAuMDQqbWF0aC5zaW4oU2luZS8zMCksMC4wNDEqbWF0aC5jb3MoU2luZS8zMCksMCkqQ0ZyYW1lLkFuZ2xlcygwLDAsbWF0aC5yYWQoMjcwKSksICAxLzYpCgkJCQkJUmlnaHRIaXAuQzAgPSBMaWIuQ2xlcnAoUmlnaHRIaXAuQzAsICBDRnJhbWUubmV3KDEsIC0xLCAwLCAwLCAwLCAxLCAwLCAxLCAtMCwgLTEsIDAsIDApKkNGcmFtZS5BbmdsZXMoMCwwLG1hdGgucmFkKDEuNSptYXRoLnNpbihTaW5lLzM1KSkpKkNGcmFtZS5uZXcoMCwtMC4wMiptYXRoLnNpbihTaW5lLzMwKSwwKSwgIDEvNikKCQkJCQlMZWZ0SGlwLkMwID0gTGliLkNsZXJwKExlZnRIaXAuQzAsICBDRnJhbWUubmV3KC0xLCAtMSwgMCwgMCwgMCwgLTEsIDAsIDEsIDAsIDEsIDAsIDApKkNGcmFtZS5BbmdsZXMoMCwwLG1hdGgucmFkKDEqbWF0aC5zaW4oU2luZS8zNSkpKSpDRnJhbWUubmV3KDAsLTAuMDIqbWF0aC5zaW4oU2luZS8zMCksMCksICAxLzYpCgkJCQkJTmVjay5DMCA9IExpYi5DbGVycChOZWNrLkMwLCAgQ0ZyYW1lLm5ldygwLCAxLCAwLCAtMSwgMCwgMCwgMCwgMCwgMSwgMCwgMSwgLTApKkNGcmFtZS5BbmdsZXMobWF0aC5yYWQoLTIqbWF0aC5jb3MoU2luZS8zMCkpLG1hdGgucmFkKDEqbWF0aC5jb3MoU2luZS8zMCkpLG1hdGgucmFkKDIqbWF0aC5zaW4oU2luZS8zMCkpKSwgIDEvNikKCQkJCQlSb290Sm9pbnQuQzAgPSBMaWIuQ2xlcnAoUm9vdEpvaW50LkMwLCAgQ0ZyYW1lLm5ldygwLCAwLCAwLCAtMSwgMCwgMCwgMCwgMCwgMSwgMCwgMSwgLTApKkNGcmFtZS5BbmdsZXMobWF0aC5yYWQoLTEuNSptYXRoLnNpbihTaW5lLzMwKSksMCwwKSpDRnJhbWUubmV3KDAsMCwwLjAyKm1hdGguc2luKFNpbmUvMzApKSwgIDEvNikKCQkJCQl0YXNrLndhaXQoKQoJCQkJZW5kCgkJCQl0YXNrLndhaXQoLjEpCgkJCQlNb3ZlbWVudC5BdHRhY2tpbmcgPSBmYWxzZQoJCQkJTW92ZW1lbnQuV2Fsa1NwZWVkID0gMjUKCQkJZWxzZWlmIEtleSA9PSAiUiIgdGhlbgoJCQkJTW92ZW1lbnQuS2lsbEF1cmEgPSAoTW92ZW1lbnQuS2lsbEF1cmEgPT0gbmlsIGFuZCB0cnVlIG9yIG5vdCBNb3ZlbWVudC5LaWxsQXVyYSkKCQkJZWxzZWlmIEtleSA9PSAiWCIgdGhlbgoJCQkJTWFpblJlbW90ZTpGaXJlQWxsQ2xpZW50cygiWEF0dGFjayIsQ0ZyYW1lcy5Ub3JzbyxIaXQpCgkJCWVsc2VpZiBLZXkgPT0gIkJhY2tTbGFzaCIgdGhlbgoJCQkJZm9yIF8sdiBpbiBwYWlycyhDb25uZWN0aW9ucykgZG8KCQkJCQl2OkRpc2Nvbm5lY3QoKQoJCQkJZW5kCgkJCQlmb3IgXyx2IGluIHBhaXJzKENoYXJhY3RlcikgZG8KCQkJCQlnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0odiwxKQoJCQkJZW5kCgkJCQlQbGF5ZXI6S2ljaygicmVqb2luIGxtYW8iKQoJCQllbHNlaWYgS2V5ID09ICJFIiB0aGVuCgkJCQlpZiBNb3ZlbWVudC5GbHlpbmcgPT0gbmlsIHRoZW4KCQkJCQlNb3ZlbWVudC5GbHlpbmcgPSBmYWxzZQoJCQkJZW5kCgkJCQlNb3ZlbWVudC5GbHlpbmcgPSBub3QgTW92ZW1lbnQuRmx5aW5nCgkJCWVsc2VpZiBLZXkgPT0gIlEiIHRoZW4KCQkJCU1vdmVtZW50LkNGcmFtZSA9IENGcmFtZS5uZXcoSGl0LlBvc2l0aW9uKSpDRnJhbWUubmV3KDAsMywwKQoJCQkJTWFpblJlbW90ZTpGaXJlQWxsQ2xpZW50cygiRWZmZWN0Iix7CgkJCQkJVHlwZSA9ICJCb3giLAoJCQkJCVRpbWUgPSAyLAoJCQkJCU1hdGVyaWFsID0gKHsKCQkJCQkJIkdyYW5pdGUiLAoJCQkJCQkiR2xhc3MiLAoJCQkJCQkiRm9yY2VGaWVsZCIsCgkJCQkJCSJOZW9uIgoJCQkJCX0pW21hdGgucmFuZG9tKDEsNCldLAoJCQkJCUNGcmFtZSA9IE1vdmVtZW50LkNGcmFtZSwKCQkJCQlTdGFydCA9IHsKCQkJCQkJVHJhbnNwYXJlbmN5ID0gMCwKCQkJCQkJU2l6ZSA9IFZlY3RvcjMubmV3KDUsNyw1KSwKCQkJCQkJQ29sb3IgPSBDb2xvcjMubmV3KG1hdGgucmFuZG9tKCksMCwwKSwKCQkJCQl9LAoJCQkJCUVuZCA9IHsKCQkJCQkJVHJhbnNwYXJlbmN5ID0gMSwKCQkJCQkJU2l6ZSA9IFZlY3RvcjMubmV3KCksCgkJCQkJCUNGcmFtZSA9IE1vdmVtZW50LkNGcmFtZSpDRnJhbWUuQW5nbGVzKG1hdGgucmFuZG9tKC1tYXRoLnBpLG1hdGgucGkpLG1hdGgucmFuZG9tKC1tYXRoLnBpLG1hdGgucGkpLG1hdGgucmFuZG9tKC1tYXRoLnBpLG1hdGgucGkpKSwKCQkJCQkJQ29sb3IgPSBDb2xvcjMubmV3KG1hdGgucmFuZG9tKCksMCwwKSwKCQkJCQl9CgkJCQl9KQoJCQllbmQKCQllbmQpCgllbmQKfQ
